<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • dbplyr</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://dbplyr.tidyverse.org/logo.png"><meta name="robots" content="noindex"><script defer data-domain="dbplyr.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dbplyr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.5.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/dbplyr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/backend-2.html">dbplyr 2.0.0 backend API</a></li>
    <li><a class="dropdown-item" href="../articles/new-backend.html">Adding a new DBI backend</a></li>
    <li><a class="dropdown-item" href="../articles/reprex.html">Reprexes for dbplyr</a></li>
    <li><a class="dropdown-item" href="../articles/sql.html">Writing SQL with dbplyr</a></li>
    <li><a class="dropdown-item" href="../articles/translation-function.html">Function translation</a></li>
    <li><a class="dropdown-item" href="../articles/translation-verb.html">Verb translation</a></li>
  </ul></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2024/04/dbplyr-2-5-0/">Version 2.5.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2023/10/dbplyr-2-4-0/">Version 2.4.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2023/01/dbplyr-2-3-0/">Version 2.3.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2022/06/dbplyr-2-2-0/">Version 2.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2021/02/dplyr-backends/">Version 2.1.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/11/dbplyr-2-0-0/">Version 2.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/04/dbplyr-1-4-0/">Version 1.4.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/01/dbplyr-1-3-0/">Version 1.3.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/01/dbplyr-1-2/">Version 1.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://blog.rstudio.com/2017/06/27/dbplyr-1-1-0/">Version 1.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidyverse/dbplyr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/tidyverse/dbplyr/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="development version" id="dbplyr-development-version">dbplyr (development version)<a class="anchor" aria-label="anchor" href="#dbplyr-development-version"></a></h2>
<ul><li><p>Add support for <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin()</a></code> and <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax()</a></code> on SQL Server (<a href="https://github.com/edward-burn" class="external-link">@edward-burn</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1602" class="external-link">#1602</a>).</p></li>
<li><p>Fix for failing snapshot tests (<a href="https://github.com/edward-burn" class="external-link">@edward-burn</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1567" class="external-link">#1567</a>).</p></li>
<li><p>Tightened argument checks for SQL translations. These changes should result in more informative errors in cases where code already failed, possibly silently; if you see errors with code that used to run correctly, please report them to the package authors (<a href="https://github.com/simonpcouch" class="external-link">@simonpcouch</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1554" class="external-link">#1554</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1555" class="external-link">#1555</a>).</p></li>
<li><p><code>clock::add_years()</code> translates to correct SQL on Spark (<a href="https://github.com/ablack3" class="external-link">@ablack3</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1510" class="external-link">#1510</a>).</p></li>
<li><p>Translations for <code><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double()</a></code> and <code><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character()</a></code> with Teradata previously raised errors and are now correct (<a href="https://github.com/rplsmn" class="external-link">@rplsmn</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1545" class="external-link">#1545</a>).</p></li>
<li><p>Translations of <code><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime()</a></code> for Postgres, SQL server, Redshift, and Snowflake previously returned the wrong sign and are now correct (<a href="https://github.com/edward-burn" class="external-link">@edward-burn</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1532" class="external-link">#1532</a>).</p></li>
<li><p><code>across(everything())</code> doesn’t select grouping columns created via <code>.by</code> in <code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1493" class="external-link">#1493</a>).</p></li>
<li><p>New translations of clock function <code>date_count_between()</code> for SQL server, Redshift, Snowflake, Postgres, and Spark (<a href="https://github.com/edward-burn" class="external-link">@edward-burn</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1495" class="external-link">#1495</a>).</p></li>
<li><p>Spark SQL backend now supports persisting tables with <code>compute(x, name = I("x.y.z"), temporary = FALSE)</code> (<a href="https://github.com/zacdav-db" class="external-link">@zacdav-db</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1502" class="external-link">#1502</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.5.0" id="dbplyr-250">dbplyr 2.5.0<a class="anchor" aria-label="anchor" href="#dbplyr-250"></a></h2><p class="text-muted">CRAN release: 2024-03-19</p>
<div class="section level3">
<h3 id="improved-tools-for-qualified-table-names-2-5-0">Improved tools for qualified table names<a class="anchor" aria-label="anchor" href="#improved-tools-for-qualified-table-names-2-5-0"></a></h3>
<ul><li>
<p>Specification of table names with schema/catalogs has been overhauled to make it simpler. This includes the following features and fixes:</p>
<ul><li><p>The simplest way to refer to a qualified table is now to wrap it in <code><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I()</a></code>, e.g. <code>I("schema_name.table_name")</code>.</p></li>
<li><p>Use of <code><a href="../reference/sql.html">sql()</a></code> and <code><a href="../reference/ident_q.html">ident_q()</a></code> inside <code><a href="../reference/in_schema.html">in_catalog()</a></code> and <code><a href="../reference/in_schema.html">in_schema()</a></code> is once again supported (<a href="https://github.com/tidyverse/dbplyr/issues/1388" class="external-link">#1388</a>).</p></li>
<li><p>It’s ok to use <code><a href="../reference/ident_q.html">ident_q()</a></code> once again (<a href="https://github.com/tidyverse/dbplyr/issues/1413" class="external-link">#1413</a>) and you should no longer see unsuppressable warnings about using <code><a href="../reference/in_schema.html">in_schema()</a></code> (<a href="https://github.com/tidyverse/dbplyr/issues/1408" class="external-link">#1408</a>).</p></li>
<li><p>The names of the arguments to <code><a href="https://dbi.r-dbi.org/reference/Id.html" class="external-link">Id()</a></code> no longer matter, only their order (<a href="https://github.com/tidyverse/dbplyr/issues/1416" class="external-link">#1416</a>). Additionally, thanks to changes to the DBI package, you no longer need to name each argument.</p></li>
<li><p>If you accidentally pass a named vector to any of the database identifer functions, those names will be automatically stripped (<a href="https://github.com/tidyverse/dbplyr/issues/1404" class="external-link">#1404</a>).</p></li>
<li><p><code>tbl_sql(check_from)</code> is now deprecated.</p></li>
</ul></li>
<li><p>dbplyr now exports some tools to work with the internal <code>table_path</code> class which is useful for certain backends that need to work with this data structure (<a href="https://github.com/tidyverse/dbplyr/issues/1300" class="external-link">#1300</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="improved-sql-2-5-0">Improved SQL<a class="anchor" aria-label="anchor" href="#improved-sql-2-5-0"></a></h3>
<ul><li><p>New translations for clock functions <code>add_years()</code>, <code>add_days()</code>, <code>date_build()</code>, <code>get_year()</code>, <code>get_month()</code>, <code>get_day()</code>, and <code><a href="https://rdrr.io/r/base/difftime.html" class="external-link">base::difftime()</a></code> on SQL server, Redshift, Snowflake, and Postgres.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> will keep computed columns used to <code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange()</a></code> subqueries that are eliminated by a subsequent select (<a href="https://github.com/ejneer" class="external-link">@ejneer</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1437" class="external-link">#1437</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">semi_join()</a></code> will no longer inline away an aggregate filter (i.e. <code>HAVING</code> clause) that was followed by a <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> (<a href="https://github.com/ejneer" class="external-link">@ejneer</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1474" class="external-link">#1474</a>)</p></li>
<li>
<p>Improved function translations:</p>
<ul><li><p>Functions qualified with the base namespace are now also translated, e.g. <code>base::paste0(x, "_1")</code> is now translated (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1022" class="external-link">#1022</a>).</p></li>
<li><p><code>-1 + x</code> now generates a translation instead erroring (<a href="https://github.com/tidyverse/dbplyr/issues/1420" class="external-link">#1420</a>).</p></li>
<li><p><code>x$name</code> never attempts to evaluate <code>name</code> (<a href="https://github.com/tidyverse/dbplyr/issues/1368" class="external-link">#1368</a>).</p></li>
<li><p>You can once again use <code>NULL</code> on the LHS of an infix operator in order to generate SQL with unusual syntax (<a href="https://github.com/tidyverse/dbplyr/issues/1345" class="external-link">#1345</a>).</p></li>
<li><p>Namespaced calls now error if the function doesn’t exist, or a translation is not available (<a href="https://github.com/tidyverse/dbplyr/issues/1426" class="external-link">#1426</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lead()</a></code> translation coerces <code>n</code> to an integer.</p></li>
</ul></li>
<li><p>Databricks: now supports creating non-temporary tables too (<a href="https://github.com/tidyverse/dbplyr/issues/1418" class="external-link">#1418</a>).</p></li>
<li>
<p>Oracle:</p>
<ul><li><p><code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_explain()</a></code> now works (<a href="https://github.com/thomashulst" class="external-link">@thomashulst</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1353" class="external-link">#1353</a>).</p></li>
<li><p><code><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date()</a></code> works when applied to a string (<a href="https://github.com/tidyverse/dbplyr/issues/1389" class="external-link">#1389</a>).</p></li>
<li><p><code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code> is once again translated to <code>FETCH FIRST</code>. This does require Oracle 12c or newer, but it actually works, compared to the approach using <code>ROWNUM</code> from <a href="https://github.com/tidyverse/dbplyr/issues/1292" class="external-link">#1292</a> (<a href="https://github.com/tidyverse/dbplyr/issues/1436" class="external-link">#1436</a>).</p></li>
<li><p>Added support for <code>str_replace()</code> and <code>str_replace_all()</code> via <code>REGEXP_REPLACE()</code> (<a href="https://github.com/thomashulst" class="external-link">@thomashulst</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1402" class="external-link">#1402</a>).</p></li>
</ul></li>
<li>
<p>Snowflake (<a href="https://github.com/nathanhaigh" class="external-link">@nathanhaigh</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1406" class="external-link">#1406</a>)</p>
<ul><li><p>Added support for <code>str_starts()</code> and <code>str_ends()</code> via <code>REGEXP_INSTR()</code></p></li>
<li><p>Refactored <code>str_detect()</code> to use <code>REGEXP_INSTR()</code> so now supports regular expressions.</p></li>
<li><p>Refactored <code><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl()</a></code> to use <code>REGEXP_INSTR()</code> so now supports case-insensitive matching through <code>grepl(..., ignore.case = TRUE)</code></p></li>
</ul></li>
<li>
<p>SQL server:</p>
<ul><li><p>Now products a clear error if you attempt to use <code><a href="https://dplyr.tidyverse.org/reference/n_distinct.html" class="external-link">n_distinct()</a></code> in <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> or <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> (<a href="https://github.com/tidyverse/dbplyr/issues/1366" class="external-link">#1366</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> does a better job of converting logical vectors from bit to boolean (<a href="https://github.com/ejneer" class="external-link">@ejneer</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1288" class="external-link">#1288</a>).</p></li>
</ul></li>
<li><p>MySQL: <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer()</a></code> gets correct translation (<a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1375" class="external-link">#1375</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-2-5-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-2-5-0"></a></h3>
<ul><li><p>Deprecation status of functions deprecated in previous versions (at least 2 years old) have been advanced. In particular, <code><a href="../reference/src_sql.html">src_sql()</a></code> is now defunct, as is the use of <code><a href="../reference/partial_eval.html">partial_eval()</a></code> with character <code>data</code>.</p></li>
<li><p>Database errors now show the generated SQL, which hopefully will make it faster to track down problems (<a href="https://github.com/tidyverse/dbplyr/issues/1401" class="external-link">#1401</a>).</p></li>
<li><p>When dbplyr creates an index on a table in a schema (e.g. <code>schema.table</code>), it now only includes the table name in the index name, not the schema name.</p></li>
<li><p>The class of remote sources now includes all S4 class names, not just the first (<a href="https://github.com/tidyverse/dbplyr/issues/918" class="external-link">#918</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">compute()</a></code> passes additional arguments all the way to <code><a href="../reference/db-sql.html">sql_query_save()</a></code>-methods (<a href="https://github.com/rsund" class="external-link">@rsund</a>).</p></li>
<li><p><code><a href="../reference/db-misc.html">db_sql_render()</a></code> correctly passes on <code>...</code> when re-calling with <code>sql_options</code> set (<a href="https://github.com/tidyverse/dbplyr/issues/1394" class="external-link">#1394</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/reframe.html" class="external-link">reframe()</a></code> now gives an informative error that it isn’t supported (<a href="https://github.com/tidyverse/dbplyr/issues/1148" class="external-link">#1148</a>).</p></li>
<li><p><code>rows_patch(in_place = FALSE)</code> now works when more than one column should be patched (<a href="https://github.com/gorcha" class="external-link">@gorcha</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1443" class="external-link">#1443</a>).</p></li>
<li><p>New <code><a href="../reference/backend-mysql.html">simulate_mariadb()</a></code> (<a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1375" class="external-link">#1375</a>).</p></li>
<li><p><code><a href="../reference/sql_variant.html">sql_translator()</a></code> now checks for duplicated definitions (<a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1374" class="external-link">#1374</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.4.0" id="dbplyr-240">dbplyr 2.4.0<a class="anchor" aria-label="anchor" href="#dbplyr-240"></a></h2><p class="text-muted">CRAN release: 2023-10-26</p>
<div class="section level3">
<h3 id="breaking-changes-2-4-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-2-4-0"></a></h3>
<ul><li><p>Using <code>compute(temporary = FALSE)</code> without providing a name is now deprecated (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1154" class="external-link">#1154</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/ntile.html" class="external-link">ntile()</a></code>’s first argument has been renamed from <code>order_by</code> to <code>x</code> to match the interface of <code><a href="https://dplyr.tidyverse.org/reference/ntile.html" class="external-link">dplyr::ntile()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1242" class="external-link">#1242</a>).</p></li>
<li><p><code>simulate_vars()</code> and <code>simulate_vars_is_typed()</code> were removed as they weren’t used and tidyselect now offers <code>tidyselect_data_proxy()</code> and <code>tidyselect_data_has_predicates()</code> (<a href="https://github.com/mgirllich" class="external-link">@mgirllich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1199" class="external-link">#1199</a>).</p></li>
<li><p><code><a href="../reference/sql_variant.html">sql_not_supported()</a></code> now expects a function name without parentheses.</p></li>
<li>
<p><code><a href="../reference/sql_query_insert.html">sql_query_append()</a></code>, <code><a href="../reference/sql_query_insert.html">sql_query_insert()</a></code>, <code>sql_query_update()</code>, <code><a href="../reference/sql_query_insert.html">sql_query_upsert()</a></code>, and <code><a href="../reference/sql_query_insert.html">sql_query_delete()</a></code> changed their arguments to make them more consistent to the other <code>sql_query_*()</code> functions:</p>
<ul><li>
<code>x_name</code> was renamed to <code>table</code>.</li>
<li>
<code>y</code> was renamed to <code>from</code> and must now be a table identifier or SQL instead of a lazy table.</li>
<li>
<code><a href="../reference/sql_query_insert.html">sql_query_append()</a></code> and <code><a href="../reference/sql_query_insert.html">sql_query_insert()</a></code> have gained the argument <code>cols</code>.</li>
</ul></li>
<li><p><code><a href="../reference/remote_name.html">remote_name()</a></code> now returns a string with the name of the table. To get the qualified identifier use the newly added <code><a href="../reference/remote_name.html">remote_table()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1280" class="external-link">#1280</a>).</p></li>
<li><p><code><a href="../reference/tbl_lazy.html">tbl_lazy()</a></code> loses <code>src</code> argument after it has been deprecated for years (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1208" class="external-link">#1208</a>).</p></li>
<li><p><code><a href="../reference/translate_sql.html">translate_sql()</a></code> now requires the <code>con</code> argument (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1311" class="external-link">#1311</a>). The <code>vars</code> argument has been removed after it threw an error for the last 7 years (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="improved-sql-2-4-0">Improved SQL<a class="anchor" aria-label="anchor" href="#improved-sql-2-4-0"></a></h3>
<ul><li><p>Preliminary databricks Spark SQL backend (<a href="https://github.com/tidyverse/dbplyr/issues/1377" class="external-link">#1377</a>).</p></li>
<li>
<p>Joins</p>
<ul><li><p><code>*_join()</code> after <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join()</a></code> works again (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1178" class="external-link">#1178</a>).</p></li>
<li><p><code>*_join()</code> now allows specifying the relationship argument. It must be <code>NULL</code> or <code>"many-to-many"</code> (<a href="https://github.com/bairdj" class="external-link">@bairdj</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1305" class="external-link">#1305</a>).</p></li>
<li><p>Queries now qualify <code>*</code> with the table alias for better compatibility (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1003" class="external-link">#1003</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join()</a></code> can now handle column names that only differ in case (<a href="https://github.com/ejneer" class="external-link">@ejneer</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1255" class="external-link">#1255</a>).</p></li>
<li><p>The <code>na_matches</code> argument of <code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">semi_join()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">anti_join()</a></code> works again (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1211" class="external-link">#1211</a>).</p></li>
<li><p>A <code>semi/anti_join()</code> on fitlered <code>y</code> is inlined when possible (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/884" class="external-link">#884</a>).</p></li>
<li><p>Joins now work again for Pool and Oracle connections (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1177" class="external-link">#1177</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1181" class="external-link">#1181</a>).</p></li>
</ul></li>
<li><p>A sequence of <code><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">union()</a></code> resp. <code><a href="https://dplyr.tidyverse.org/reference/setops.html" class="external-link">union_all()</a></code> now produces a flat query instead of subqueries (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1269" class="external-link">#1269</a>).</p></li>
<li>
<p>Added translations for:</p>
<ul><li>
<code><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nzchar()</a></code> (<a href="https://github.com/MichaelChirico" class="external-link">@MichaelChirico</a>, <a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1094" class="external-link">#1094</a>).</li>
<li>
<code>str_detect()</code>, <code>str_starts()</code> and <code>str_ends()</code> with fixed patterns (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1009" class="external-link">#1009</a>).</li>
<li>
<code><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1200" class="external-link">#1200</a>).</li>
</ul></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">if_any()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">if_all()</a></code> translations are now wrapped in parentheses. This makes sure it can be combined via <code>&amp;</code> with other conditions (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1153" class="external-link">#1153</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/nth.html" class="external-link">nth()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/nth.html" class="external-link">first()</a></code>, and <code><a href="https://dplyr.tidyverse.org/reference/nth.html" class="external-link">last()</a></code> now support the <code>na_rm</code> argument (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1193" class="external-link">#1193</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-2-4-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-2-4-0"></a></h3>
<ul><li><p><code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across()</a></code> now supports namespaced functions, e.g.  <code>across(x, dplyr::dense_rank)</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1231" class="external-link">#1231</a>).</p></li>
<li><p><code>db_copy_to(overwrite = TRUE)</code> now actually works.</p></li>
<li><p><code><a href="../reference/db-io.html">db_copy_to()</a></code>’s <code>...</code> are now passed to <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_write_table()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1237" class="external-link">#1237</a>).</p></li>
<li><p>Added <code><a href="../reference/db-sql.html">db_supports_table_alias_with_as()</a></code> to customise whether a backend supports specifying a table alias with <code>AS</code> or not (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_write_table()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_save_query()</a></code> gain the <code>overwrite</code> argument.</p></li>
<li><p><code><a href="../reference/pivot_wider.tbl_lazy.html">dbplyr_pivot_wider_spec()</a></code> is now exported. Unlike <code>pivot_wider()</code> this can be lazy. Note that this will be removed soon after <code>pivot_wider_spec()</code> becomes a generic (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code>ing with window functions now generates columns called <code>col01</code> rather than <code>q01</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1258" class="external-link">#1258</a>).</p></li>
<li><p><code>pivot_wider()</code> now matches tidyr <code>NA</code> column handling (<a href="https://github.com/ejneer" class="external-link">@ejneer</a> <a href="https://github.com/tidyverse/dbplyr/issues/1238" class="external-link">#1238</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> can once again be used after <code>arrange(desc(x))</code> (<a href="https://github.com/ejneer" class="external-link">@ejneer</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1240" class="external-link">#1240</a>).</p></li>
<li>
<p><code><a href="https://dplyr.tidyverse.org/reference/explain.html" class="external-link">show_query()</a></code> and <code><a href="../reference/remote_name.html">remote_query()</a></code> gain the argument <code>sql_options</code> that allows to control how the SQL is generated. It can be created via <code><a href="../reference/sql_options.html">sql_options()</a></code> which has the following arguments:</p>
<ul><li>
<code>cte</code>: use common table expressions?</li>
<li>
<code>use_star</code>: use <code>SELECT *</code> or explicitly select every column?</li>
<li>
<code>qualify_all_columns</code>: qualify all columns in a join or only the ambiguous ones? (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1146" class="external-link">#1146</a>).</li>
</ul><p>Consequently the <code>cte</code> argument of <code><a href="https://dplyr.tidyverse.org/reference/explain.html" class="external-link">show_query()</a></code> and <code><a href="../reference/remote_name.html">remote_query()</a></code> has been deprecated (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1146" class="external-link">#1146</a>).</p>
</li>
<li><p><code>slice_min/max()</code> can now order by multiple variables like dplyr, e.g. use <code>slice_min(lf, tibble(x, y))</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1167" class="external-link">#1167</a>).</p></li>
<li><p><code>slice_*()</code> now supports the data masking pronouns <code>.env</code> and <code>.data</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1294" class="external-link">#1294</a>).</p></li>
<li><p><code><a href="../reference/db-misc.html">sql_join_suffix()</a></code> gains the argument <code>suffix</code> so that methods can check whether the suffix is valid for the backend (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>).</p></li>
<li><p><code><a href="../reference/db-sql.html">sql_random()</a></code> is now deprecated. It was used to power <code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample()</a></code> which is now done via the translation for <code><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1200" class="external-link">#1200</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl()</a></code> now informs when the user probably forgot to wrap the table identifier with <code><a href="../reference/in_schema.html">in_schema()</a></code> or <code><a href="../reference/sql.html">sql()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1287" class="external-link">#1287</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="backend-specific-improvements-2-4-0">Backend specific improvements<a class="anchor" aria-label="anchor" href="#backend-specific-improvements-2-4-0"></a></h3>
<ul><li>Access
<ul><li>Added translation for <code>!=</code> to <code>&lt;&gt;</code> (<a href="https://github.com/erikvona" class="external-link">@erikvona</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1219" class="external-link">#1219</a>).</li>
</ul></li>
<li>DuckDB
<ul><li>now supports the <code>returning</code> argument of <code>rows_*()</code>.</li>
</ul></li>
<li>MySQL/MariaDB:
<ul><li>
<code><a href="https://dplyr.tidyverse.org/reference/rows.html" class="external-link">rows_update()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/rows.html" class="external-link">rows_patch()</a></code> now give an informative error when the unsupported <code>returning</code> argument is used (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1279" class="external-link">#1279</a>).</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/rows.html" class="external-link">rows_upsert()</a></code> now gives an informative error that it isn’t supported (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1279" class="external-link">#1279</a>).</li>
<li>
<code>rows_*()</code> use the column types of <code>x</code> when auto copying <code>y</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1327" class="external-link">#1327</a>).</li>
<li>
<code><a href="../reference/copy_inline.html">copy_inline()</a></code> now works (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1188" class="external-link">#1188</a>).</li>
<li>Fix translation of <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric()</a></code>, <code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct()</a></code>, <code>as_datetime()</code>, and <code>as.integer64()</code> (<a href="https://github.com/avsdev-cw" class="external-link">@avsdev-cw</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1189" class="external-link">#1189</a>).</li>
</ul></li>
<li>MS SQL:
<ul><li>
<code><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">row_number()</a></code> now works when no order is specified (<a href="https://github.com/ejneer" class="external-link">@ejneer</a>, <a href="https://github.com/fh-mthomson" class="external-link">@fh-mthomson</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1332" class="external-link">#1332</a>)</li>
</ul></li>
<li>Oracle:
<ul><li>Fix translation of <code><a href="https://dplyr.tidyverse.org/reference/rows.html" class="external-link">rows_upsert()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/TBlackmore" class="external-link">@TBlackmore</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1286" class="external-link">#1286</a>)</li>
<li>
<code>head(n)</code> is now translated to <code>WHERE ROWNUM &lt;= n</code> to also support old versions &lt;= 11.2 (<a href="https://github.com/JeremyPasco" class="external-link">@JeremyPasco</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1292" class="external-link">#1292</a>).</li>
</ul></li>
<li>Postgres
<ul><li>The <code>rows_*()</code> functions now also work inside a transaction (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1183" class="external-link">#1183</a>).</li>
</ul></li>
<li>SQLite
<ul><li>Subqueries now also get an alias. This makes it consistent with other backends and simplifies the implementation.</li>
</ul></li>
<li>SQL Server
<ul><li>
<code>distinct(.keep_all = TRUE)</code> now works (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1053" class="external-link">#1053</a>).</li>
<li>The translation of <code><a href="https://dplyr.tidyverse.org/reference/between.html" class="external-link">between()</a></code> now also works when used in <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1241" class="external-link">#1241</a>).</li>
<li>
<code><a href="https://rdrr.io/r/base/any.html" class="external-link">any()</a></code> and <code><a href="https://rdrr.io/r/base/all.html" class="external-link">all()</a></code> now work (<a href="https://github.com/ejneer" class="external-link">@ejneer</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1273" class="external-link">#1273</a>).</li>
<li>Fixed negation of bit (boolean) fields (<a href="https://github.com/ejneer" class="external-link">@ejneer</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1239" class="external-link">#1239</a>)</li>
</ul></li>
<li>Snowflake:
<ul><li>
<code>na.rm = TRUE</code> is now respected in <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin()</a></code> and <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax()</a></code> instead of being silently ignored (<a href="https://github.com/fh-mthomson" class="external-link">@fh-mthomson</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1329" class="external-link">#1329</a>)</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">row_number()</a></code> now works when no order is specified (<a href="https://github.com/fh-mthomson" class="external-link">@fh-mthomson</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1332" class="external-link">#1332</a>)</li>
</ul></li>
<li>Teradata
<ul><li>
<code><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct()</a></code> + <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code> now work (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/685" class="external-link">#685</a>).</li>
<li>
<code>as.Date(x)</code> is now translate to <code>CAST(x AS DATE)</code> again unless <code>x</code> is a string (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1285" class="external-link">#1285</a>).</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">row_number()</a></code> no longer defaults to partitioning by groups (now aligned with other databases when no order is specified: <code>ROW_NUMBER()</code> defaults to <code>ORDER BY (SELECT NULL)</code>) (<a href="https://github.com/fh-mthomson" class="external-link">@fh-mthomson</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1331" class="external-link">#1331</a>)</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.3.4" id="dbplyr-234">dbplyr 2.3.4<a class="anchor" aria-label="anchor" href="#dbplyr-234"></a></h2><p class="text-muted">CRAN release: 2023-09-26</p>
<ul><li>Hot patch release to resolve R CMD check failures.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.3.3" id="dbplyr-233">dbplyr 2.3.3<a class="anchor" aria-label="anchor" href="#dbplyr-233"></a></h2><p class="text-muted">CRAN release: 2023-07-07</p>
<ul><li>Hot patch to fix R CMD check issues</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.3.2" id="dbplyr-232">dbplyr 2.3.2<a class="anchor" aria-label="anchor" href="#dbplyr-232"></a></h2><p class="text-muted">CRAN release: 2023-03-21</p>
<ul><li>Hot patch to fix R CMD check issues</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.3.1" id="dbplyr-231">dbplyr 2.3.1<a class="anchor" aria-label="anchor" href="#dbplyr-231"></a></h2><p class="text-muted">CRAN release: 2023-02-24</p>
<div class="section level3">
<h3 id="breaking-changes-2-3-1">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-2-3-1"></a></h3>
<ul><li>
<code><a href="../reference/window_order.html">window_order()</a></code> now only accepts bare symbols or symbols wrapped in <code><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc()</a></code>. This breaking change is necessary to allow <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> to drop and rename variables used in <code><a href="../reference/window_order.html">window_order()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1103" class="external-link">#1103</a>).</li>
</ul></div>
<div class="section level3">
<h3 id="improved-error-messages-2-3-1">Improved error messages<a class="anchor" aria-label="anchor" href="#improved-error-messages-2-3-1"></a></h3>
<ul><li><p><code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile()</a></code> and <code><a href="https://rdrr.io/r/stats/median.html" class="external-link">median()</a></code> now error for SQL Server when used in <code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise()</a></code> and for PostgreSQL when used in <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> as they can’t be properly translated (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1110" class="external-link">#1110</a>).</p></li>
<li><p>Added an informative error for unsupported join arguments <code>unmatched</code> and <code>multiple</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>).</p></li>
<li><p>Using predicates, e.g. <code>where(is.integer)</code>, in <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across()</a></code> now produces an error as they never worked anyway (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1169" class="external-link">#1169</a>).</p></li>
<li><p>Catch unsupported argument <code>pivot_wider(id_expand = TRUE)</code> and <code>pivot_longer(cols_vary)</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1109" class="external-link">#1109</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-in-sql-generation-2-3-1">Bug fixes in SQL generation<a class="anchor" aria-label="anchor" href="#bug-fixes-in-sql-generation-2-3-1"></a></h3>
<ul><li><p>Fixed an issue when using a window function after a <code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1104" class="external-link">#1104</a>).</p></li>
<li><p>Fixed an issue when there where at least 3 joins and renamed variables (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1101" class="external-link">#1101</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> after <code><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct()</a></code> now again produce a subquery to generate the correct translation (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1119" class="external-link">#1119</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1141" class="external-link">#1141</a>).</p></li>
<li><p>Fixed an issue when using <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> on a summarised variable (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1128" class="external-link">#1128</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> + <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> now again produces a new query if the <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> uses a window function or SQL (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1135" class="external-link">#1135</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/pick.html" class="external-link">pick()</a></code> can be used (again) in <code><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1125" class="external-link">#1125</a>).</p></li>
<li><p>The <code>rows_*()</code> function work again for tables in a schema in PostgreSQL (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1133" class="external-link">#1133</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-2-3-1">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-2-3-1"></a></h3>
<ul><li><p><code><a href="../reference/sql.html">sql()</a></code> now evaluates its arguments locally also when used in <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1039" class="external-link">#1039</a>).</p></li>
<li><p>The rank functions (<code><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">row_number()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">min_rank()</a></code>, <code><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">dense_rank()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/percent_rank.html" class="external-link">percent_rank()</a></code>, and <code><a href="https://dplyr.tidyverse.org/reference/percent_rank.html" class="external-link">cume_dist()</a></code>) now support multiple variables by wrapping them in <code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble()</a></code>, e.g. <code>rank(tibble(x, y))</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1118" class="external-link">#1118</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull()</a></code> now supports the argument <code>name</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1136" class="external-link">#1136</a>).</p></li>
<li><p>Added support for <code><a href="https://dplyr.tidyverse.org/reference/join_by.html" class="external-link">join_by()</a></code> added in dplyr 1.1.0 (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1074" class="external-link">#1074</a>).</p></li>
<li><p>Using <code>by = character()</code> to perform a cross join is now soft-deprecated in favor of <code><a href="https://dplyr.tidyverse.org/reference/cross_join.html" class="external-link">cross_join()</a></code>.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">right_join()</a></code> are now translated directly to <code>FULL JOIN</code> and <code>RIGHT JOIN</code> for SQLite as native support was finally added (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1150" class="external-link">#1150</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/case_match.html" class="external-link">case_match()</a></code> now works with strings on the left hand side (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1143" class="external-link">#1143</a>).</p></li>
<li><p>The rank functions (<code><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">row_number()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">min_rank()</a></code>, <code><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">dense_rank()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/percent_rank.html" class="external-link">percent_rank()</a></code>, and <code><a href="https://dplyr.tidyverse.org/reference/percent_rank.html" class="external-link">cume_dist()</a></code>) now work again for variables wrapped in <code><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc()</a></code>, e.g. <code>row_number(desc(x))</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1118" class="external-link">#1118</a>).</p></li>
<li><p>Moved argument <code>auto_index</code> after <code>...</code> in <code>*_join()</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1115" class="external-link">#1115</a>).</p></li>
<li><p>Removed dependency on assertthat (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1112" class="external-link">#1112</a>).</p></li>
<li>
<p><code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across()</a></code> now uses the original value when a column is overridden to match the behaviour of dplyr. For example <code>mutate(df, across(c(x, y), ~ .x / x))</code> now produces</p>
<pre><code>SELECT `x` / `x` AS `x`, `y` / `x` AS `y`
FROM `df`</code></pre>
<p>instead of</p>
<pre><code>SELECT `x`, `y` / `x` AS `y`
FROM (
  SELECT `x` / `x` AS `x`, `y`
  FROM `df`
) </code></pre>
<p>(<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1015" class="external-link">#1015</a>).</p>
</li>
<li><p>Restricted length of table aliases to avoid truncation on certain backends (e.g., Postgres) (<a href="https://github.com/fh-mthomson" class="external-link">@fh-mthomson</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1096" class="external-link">#1096</a>)</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.3.0" id="dbplyr-230">dbplyr 2.3.0<a class="anchor" aria-label="anchor" href="#dbplyr-230"></a></h2><p class="text-muted">CRAN release: 2023-01-16</p>
<ul><li>Compatibility with purrr 1.0.0 (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1085" class="external-link">#1085</a>).</li>
</ul><div class="section level3">
<h3 id="new-features-2-3-0">New features<a class="anchor" aria-label="anchor" href="#new-features-2-3-0"></a></h3>
<ul><li><p><code><a href="https://stringr.tidyverse.org/reference/str_like.html" class="external-link">stringr::str_like()</a></code> (new in 1.5.0) is translated to the closest <code>LIKE</code> equivalent (<a href="https://github.com/rjpat" class="external-link">@rjpat</a>, <a href="https://github.com/tidyverse/dbplyr/issues/509" class="external-link">#509</a>)</p></li>
<li>
<p>In preparation for dplyr 1.1.0:</p>
<ul><li>The <code>.by</code> argument is supported (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1051" class="external-link">#1051</a>).</li>
<li>Passing <code>...</code> to <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across()</a></code> is deprecated because the evaluation timing of <code>...</code> is ambiguous. Now instead of (e.g.) <code>across(a:b, mean, na.rm = TRUE)</code> use <code>across(a:b, \(x) mean(x, na.rm = TRUE)</code>
</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/pick.html" class="external-link">pick()</a></code> is translated (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1044" class="external-link">#1044</a>).</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/case_match.html" class="external-link">case_match()</a></code> is translated (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1020" class="external-link">#1020</a>).</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when()</a></code> now supports the <code>.default</code> argument (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1017" class="external-link">#1017</a>).</li>
</ul></li>
<li><p>Variables that aren’t found in either the data or in the environment now produce an error (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/907" class="external-link">#907</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="sql-optimisation-2-3-0">SQL optimisation<a class="anchor" aria-label="anchor" href="#sql-optimisation-2-3-0"></a></h3>
<ul><li>
<p>dbplyr now produces fewer subqueries resulting in shorter, more readable, and, in some cases, faster SQL. The following combination of verbs now avoids a subquery if possible:</p>
<ul><li>
<code>*_join()</code> + <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/876" class="external-link">#876</a>).</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> + <code>*_join()</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/875" class="external-link">#875</a>).</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> + <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> + <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/792" class="external-link">#792</a>).</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/880" class="external-link">#880</a>).</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise()</a></code> + <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> now translates to <code>HAVING</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/877" class="external-link">#877</a>).</li>
<li>
<code>left/inner_join()</code> + <code>left/inner_join()</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/865" class="external-link">#865</a>).</li>
</ul></li>
<li><p>dbplyr now uses <code>SELECT *</code> after a join instead of explicitly selecting every column, where possible (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/898" class="external-link">#898</a>).</p></li>
<li><p>Joins only use the table aliases (“LHS” and “RHS”) if necessary (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>).</p></li>
<li><p>When using common table expressions, the results of joins and set operations are now reused (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/978" class="external-link">#978</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="improved-error-messages-2-3-0">Improved error messages<a class="anchor" aria-label="anchor" href="#improved-error-messages-2-3-0"></a></h3>
<ul><li><p>Many errors have been improved and now show the function where the error happened instead of a helper function (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/907" class="external-link">#907</a>).</p></li>
<li><p>Errors produced by the database, e.g. in <code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect()</a></code> or <code>rows_*()</code>, now show the verb where the error happened (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>).</p></li>
<li><p><code><a href="../reference/window_order.html">window_order()</a></code> now produces a better error message when applied to a data frame (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/947" class="external-link">#947</a>).</p></li>
<li><p>Using a named <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across()</a></code> now gives a clear error message (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/761" class="external-link">#761</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-2-3-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-2-3-0"></a></h3>
<ul><li><p>Keyword highlighting can now be customised via the option <code>dbplyr_highlight</code>. Turn it off via <code>options(dbplyr_highlight = FALSE)</code> or pass a custom ansi style, e.g. <code>options(dbplyr_highlight = cli::combine_ansi_styles("bold", "cyan"))</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/974" class="external-link">#974</a>).</p></li>
<li><p>The rank functions (<code><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">row_number()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">min_rank()</a></code>, <code><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">dense_rank()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/percent_rank.html" class="external-link">percent_rank()</a></code>, and <code><a href="https://dplyr.tidyverse.org/reference/percent_rank.html" class="external-link">cume_dist()</a></code>) now give missing values the rank NA to match the behaviour of dplyr (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/991" class="external-link">#991</a>).</p></li>
<li><p><code>NA</code>s in <code>blob()</code>s are correctly translated to <code>NULL</code> (<a href="https://github.com/tidyverse/dbplyr/issues/983" class="external-link">#983</a>).</p></li>
<li><p><code><a href="../reference/copy_inline.html">copy_inline()</a></code> gains a <code>types</code> argument to specify the SQL column types (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/963" class="external-link">#963</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">cur_column()</a></code> is now supported (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/951" class="external-link">#951</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct()</a></code> returns columns ordered the way you request, not the same as the input data (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>).</p></li>
<li><p><code>fill()</code> can now fill “downup” and “updown” (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1057" class="external-link">#1057</a>), and now order by non-numeric columns also in the up direction (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1057" class="external-link">#1057</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> now works when using a window function and an external vector (<a href="https://github.com/tidyverse/dbplyr/issues/1048" class="external-link">#1048</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by()</a></code> + renamed columns works once again (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/928" class="external-link">#928</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/nth.html" class="external-link">last()</a></code> is correctly translated when no window frame is specified (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1063" class="external-link">#1063</a>).</p></li>
<li><p><code><a href="https://rdrr.io/r/methods/setOldClass.html" class="external-link">setOldClass()</a></code> uses a namespace, fixing an installation issue (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/927" class="external-link">#927</a>).</p></li>
<li><p><code><a href="../reference/sql.html">sql()</a></code> is now translated differently. The <code>...</code> are now evaluated locally instead of being translated with <code><a href="../reference/translate_sql.html">translate_sql()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/952" class="external-link">#952</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="backend-specific-improvements-2-3-0">Backend specific improvements<a class="anchor" aria-label="anchor" href="#backend-specific-improvements-2-3-0"></a></h3>
<ul><li>
<p>HANA:</p>
<ul><li>Correctly translates <code><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character()</a></code> (<a href="https://github.com/tidyverse/dbplyr/issues/1027" class="external-link">#1027</a>).</li>
<li>
<code><a href="../reference/copy_inline.html">copy_inline()</a></code> now works for Hana (<a href="https://github.com/tidyverse/dbplyr/issues/950" class="external-link">#950</a>)</li>
</ul></li>
<li>
<p>MySQL:</p>
<ul><li>
<code>str_flatten()</code> uses <code>collapse = ""</code> by default (<a href="https://github.com/fh-afrachioni" class="external-link">@fh-afrachioni</a>, <a href="https://github.com/tidyverse/dbplyr/issues/993" class="external-link">#993</a>)</li>
</ul></li>
<li>
<p>Oracle:</p>
<ul><li>
<code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample()</a></code> now works for Oracle (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/986" class="external-link">#986</a>).</li>
<li>
<code><a href="../reference/copy_inline.html">copy_inline()</a></code> now works for Oracle (<a href="https://github.com/tidyverse/dbplyr/issues/972" class="external-link">#972</a>)</li>
</ul></li>
<li>
<p>PostgreSQL:</p>
<ul><li>Generates correct literals for Dates (<a href="https://github.com/tidyverse/dbplyr/issues/727" class="external-link">#727</a>).</li>
<li>
<code>str_flatten()</code> uses <code>collapse = ""</code> by default (<a href="https://github.com/fh-afrachioni" class="external-link">@fh-afrachioni</a>, <a href="https://github.com/tidyverse/dbplyr/issues/993" class="external-link">#993</a>)</li>
<li>
<code>rows_*()</code> use the column types of <code>x</code> when auto copying (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/909" class="external-link">#909</a>).</li>
</ul></li>
<li>
<p>Redshift:</p>
<ul><li>
<code><a href="https://rdrr.io/r/base/Round.html" class="external-link">round()</a></code> now respects the <code>digits</code> argument (<a href="https://github.com/owenjonesuob" class="external-link">@owenjonesuob</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1033" class="external-link">#1033</a>).</li>
<li>No longer tries to use named windows anymore (<a href="https://github.com/owenjonesuob" class="external-link">@owenjonesuob</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1035" class="external-link">#1035</a>).</li>
<li>
<code><a href="../reference/copy_inline.html">copy_inline()</a></code> now works for Redshift (<a href="https://github.com/tidyverse/dbplyr/issues/949" class="external-link">#949</a>, thanks to <a href="https://github.com/ejneer" class="external-link">@ejneer</a> for an initial implementation).</li>
<li>
<code>str_flatten()</code> uses <code>collapse = ""</code> by default (<a href="https://github.com/fh-afrachioni" class="external-link">@fh-afrachioni</a>, <a href="https://github.com/tidyverse/dbplyr/issues/993" class="external-link">#993</a>)</li>
</ul></li>
<li><p>Snowflake:</p></li>
<li><p>numeric functions: <code><a href="https://rdrr.io/r/base/all.html" class="external-link">all()</a></code>, <code><a href="https://rdrr.io/r/base/any.html" class="external-link">any()</a></code>, <code><a href="https://rdrr.io/r/base/Log.html" class="external-link">log10()</a></code>, <code><a href="https://rdrr.io/r/base/Round.html" class="external-link">round()</a></code>, <code><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor()</a></code>, <code><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cov()</a></code> and <code><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd()</a></code>.</p></li>
<li><p>date functions: <code>day()</code>, <code>mday()</code>, <code>wday()</code>, <code>yday()</code>, <code>week()</code>, <code>isoweek()</code>, <code>month()</code>, <code>quarter()</code>, <code>isoyear()</code>, <code>seconds()</code>, <code>minutes()</code>, <code>hours()</code>, <code>days()</code>, <code>weeks()</code>, <code><a href="https://rdrr.io/r/base/weekday.POSIXt.html" class="external-link">months()</a></code>, <code>years()</code> and <code>floor_date()</code>.</p></li>
<li><p>string functions: <code><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl()</a></code>, <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste()</a></code>, <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0()</a></code>, <code>str_c()</code>, <code>str_locate()</code>, <code>str_detect()</code>, <code>str_replace()</code>, <code>str_replace_all()</code>, <code>str_remove()</code>, <code>str_remove_all()</code>, <code>str_trim()</code>, <code>str_squish()</code> and <code>str_flatten()</code> (<a href="https://github.com/fh-afrachioni" class="external-link">@fh-afrachioni</a>, <a href="https://github.com/tidyverse/dbplyr/issues/860" class="external-link">#860</a>).</p></li>
<li><p><code>str_flatten()</code> uses <code>collapse = ""</code> by default (<a href="https://github.com/fh-afrachioni" class="external-link">@fh-afrachioni</a>, <a href="https://github.com/tidyverse/dbplyr/issues/993" class="external-link">#993</a>)</p></li>
<li>
<p>SQLite:</p>
<ul><li>
<code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile()</a></code> gives a better error saying that it is not supported (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1000" class="external-link">#1000</a>).</li>
</ul></li>
<li>
<p>SQL server:</p>
<ul><li>
<code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct()</a></code> now translated correctly (<a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>, <a href="https://github.com/tidyverse/dbplyr/issues/1011" class="external-link">#1011</a>).</li>
<li>
<code><a href="https://rdrr.io/r/stats/median.html" class="external-link">median()</a></code> now translated correctly (<a href="https://github.com/tidyverse/dbplyr/issues/1008" class="external-link">#1008</a>).</li>
<li>
<code>pivot_wider()</code> works again for MS SQL (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/929" class="external-link">#929</a>).</li>
<li>Always use 1 and 0 as literals for logicals (<a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>, <a href="https://github.com/tidyverse/dbplyr/issues/934" class="external-link">#934</a>).</li>
</ul></li>
<li>
<p>Teradata:</p>
<ul><li>Querying works again. Unfortunately, the fix requires every column to once again by explicitly selected (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/966" class="external-link">#966</a>).</li>
<li>New translations for <code><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date()</a></code>, <code>week()</code>, <code>quarter()</code>, <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste()</a></code>, <code><a href="https://rdrr.io/r/base/startsWith.html" class="external-link">startsWith()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">row_number()</a></code>, <code><a href="https://rdrr.io/r/stats/weighted.mean.html" class="external-link">weighted.mean()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lead()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag()</a></code>, and <code><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum()</a></code> (<a href="https://github.com/overmar" class="external-link">@overmar</a>, <a href="https://github.com/tidyverse/dbplyr/issues/913" class="external-link">#913</a>).</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.1" id="dbplyr-221">dbplyr 2.2.1<a class="anchor" aria-label="anchor" href="#dbplyr-221"></a></h2><p class="text-muted">CRAN release: 2022-06-27</p>
<ul><li><p>Querying Oracle databases works again. Unfortunately, the fix requires every column to be explicitly selected again (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/908" class="external-link">#908</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">semi_join()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">anti_join()</a></code> work again for Spark (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/915" class="external-link">#915</a>).</p></li>
<li><p><code>str_c()</code> is now translated to <code>||</code> in Oracle (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/921" class="external-link">#921</a>).</p></li>
<li><p><code><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd()</a></code>, <code><a href="https://rdrr.io/r/stats/cor.html" class="external-link">var()</a></code>, <code><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor()</a></code> and <code><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cov()</a></code> now give clear error messages on databases that don’t support them.</p></li>
<li><p><code><a href="https://rdrr.io/r/base/any.html" class="external-link">any()</a></code> and <code><a href="https://rdrr.io/r/base/all.html" class="external-link">all()</a></code> gain default translations for all backends.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.0" id="dbplyr-220">dbplyr 2.2.0<a class="anchor" aria-label="anchor" href="#dbplyr-220"></a></h2><p class="text-muted">CRAN release: 2022-06-05</p>
<div class="section level3">
<h3 id="new-features-2-2-0">New features<a class="anchor" aria-label="anchor" href="#new-features-2-2-0"></a></h3>
<ul><li><p>SQL formatting has been considerably improved with new wrapping and indenting. <code><a href="https://dplyr.tidyverse.org/reference/explain.html" class="external-link">show_query()</a></code> creates more readable queries by printing the keywords in blue (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/644" class="external-link">#644</a>). When possible dbplyr now uses <code>SELECT *</code> instead of explicitly selecting every column (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>).</p></li>
<li><p>Added support for <code><a href="https://dplyr.tidyverse.org/reference/rows.html" class="external-link">rows_insert()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/rows.html" class="external-link">rows_append()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/rows.html" class="external-link">rows_update()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/rows.html" class="external-link">rows_patch()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/rows.html" class="external-link">rows_upsert()</a></code>, and <code><a href="https://dplyr.tidyverse.org/reference/rows.html" class="external-link">rows_delete()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/736" class="external-link">#736</a>).</p></li>
<li><p>Added <code><a href="../reference/copy_inline.html">copy_inline()</a></code> as a <code><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to()</a></code> equivalent that does not need write access (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/628" class="external-link">#628</a>).</p></li>
<li><p><code><a href="../reference/remote_name.html">remote_query()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/explain.html" class="external-link">show_query()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">compute()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect()</a></code> have an experimental <code>cte</code> argument. If <code>TRUE</code> the SQL query will use common table expressions instead of nested queries (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/638" class="external-link">#638</a>).</p></li>
<li><p>New <code><a href="../reference/in_schema.html">in_catalog()</a></code>, which works like <code><a href="../reference/in_schema.html">in_schema()</a></code>, but allows creation of table identifiers consisting of three components: catalog, schema, name (<a href="https://github.com/tidyverse/dbplyr/issues/806" class="external-link">#806</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="improvements-to-sql-generation-2-2-0">Improvements to SQL generation<a class="anchor" aria-label="anchor" href="#improvements-to-sql-generation-2-2-0"></a></h3>
<ul><li><p>When possible, dbplyr now uses <code>SELECT *</code> instead of explicitly selecting every column (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>).</p></li>
<li><p>New translation for <code><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/697" class="external-link">#697</a>).</p></li>
<li>
<p>Improved translations for specific backends:</p>
<ul><li>
<code><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date()</a></code> for Oracle (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/661" class="external-link">#661</a>).</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when()</a></code> with a final clause of the form <code>TRUE ~ ...</code> uses <code>ELSE ...</code> for SQLite (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/754" class="external-link">#754</a>).</li>
<li>
<code>day()</code>, <code>week()</code>, <code>isoweek()</code>, and <code>isoyear()</code> for Postgres (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/675" class="external-link">#675</a>).</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/explain.html" class="external-link">explain()</a></code> for ROracle (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>).</li>
<li>
<code>fill()</code> for SQL Server (<a href="https://github.com/tidyverse/dbplyr/issues/651" class="external-link">#651</a>, <a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>) and RPostgreSQL (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>).</li>
<li>
<code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile()</a></code> for SQL Server (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/620" class="external-link">#620</a>).</li>
<li>
<code>str_flatten()</code> for Redshift (<a href="https://github.com/hdplsa" class="external-link">@hdplsa</a>, <a href="https://github.com/tidyverse/dbplyr/issues/804" class="external-link">#804</a>)</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample()</a></code> for MySQL/MariaDB and SQL Server (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/617" class="external-link">#617</a>).</li>
<li>
<code><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">union()</a></code> for Hive (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/663" class="external-link">#663</a>).</li>
</ul></li>
<li><p>The backend function <code>dbplyr_fill0()</code> (used for databases that lack <code>IGNORE NULLS</code> support) now respects database specific translations (<a href="https://github.com/rsund" class="external-link">@rsund</a>, <a href="https://github.com/tidyverse/dbplyr/issues/753" class="external-link">#753</a>).</p></li>
<li><p>Calls of the form <code>stringr::foo()</code> or <code>lubridate::foo()</code> are now evaluated in the database, rather than locally (<a href="https://github.com/tidyverse/dbplyr/issues/197" class="external-link">#197</a>).</p></li>
<li><p>Unary plus (e.g. <code>db %&gt;% filter(x == +1)</code>) now works (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/674" class="external-link">#674</a>).</p></li>
<li><p><code><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na()</a></code>, <code><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when()</a></code>, and <code>if()</code> generate slightly more compact SQL (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/738" class="external-link">#738</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else()</a></code> now supports the <code>missing</code> argument (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/641" class="external-link">#641</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n()</a></code> now respects the window frame (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/700" class="external-link">#700</a>).</p></li>
<li><p><code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile()</a></code> no longer errors when using the <code>na.rm</code> argument (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/600" class="external-link">#600</a>).</p></li>
<li><p><code><a href="../reference/remote_name.html">remote_name()</a></code> now returns a name in more cases where it makes sense (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/850" class="external-link">#850</a>).</p></li>
<li><p>The partial evaluation code is now more aligned with <code>dtplyr</code>. This makes it easier to transfer bug fixes and new features from one package to the other. In this process the second argument of <code><a href="../reference/partial_eval.html">partial_eval()</a></code> was changed to a lazy frame instead of a character vector of variables (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/766" class="external-link">#766</a>). Partially evaluated expressions with infix operations are now correctly translated. For example <code>translate_sql(!!expr(2 - 1) * x)</code> now works (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/634" class="external-link">#634</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-2-2-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-2-2-0"></a></h3>
<ul><li><p>New <code><a href="https://pillar.r-lib.org/reference/tbl_format_header.html" class="external-link">pillar::tbl_format_header()</a></code> method for lazy tables: Printing a lazy table where all rows are displayed also shows the exact number of rows in the header. The threshold is controlled by <code>getOption("pillar.print_min")</code>, with a default of 10 (<a href="https://github.com/tidyverse/dbplyr/issues/796" class="external-link">#796</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
<li><p>The 1st edition extension mechanism is formally deprecated (<a href="https://github.com/tidyverse/dbplyr/issues/507" class="external-link">#507</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">if_any()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">if_all()</a></code> now defaults to <code>.cols = everything()</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/760" class="external-link">#760</a>). If <code>.fns</code> is not provided <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">if_any()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">if_all()</a></code> work like a parallel version of <code><a href="https://rdrr.io/r/base/any.html" class="external-link">any()</a></code>/<code><a href="https://rdrr.io/r/base/any.html" class="external-link">any()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/734" class="external-link">#734</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">if_any()</a></code>, and <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">if_all()</a></code> can now translate evaluated lists and functions (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/796" class="external-link">#796</a>), and accept the name of a list of functions (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/817" class="external-link">#817</a>).</p></li>
<li><p>Multiple <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across()</a></code> calls in <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute()</a></code> can now access freshly created variables (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/802" class="external-link">#802</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">add_count()</a></code> now doesn’t change the groups of the input (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/614" class="external-link">#614</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">compute()</a></code> can now handle when <code>name</code> is named by unnaming it first (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/623" class="external-link">#623</a>), and now works when <code>temporary = TRUE</code> for Oracle (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/621" class="external-link">#621</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct()</a></code> now supports <code>.keep_all = TRUE</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/756" class="external-link">#756</a>).</p></li>
<li><p><code>expand()</code> now works in DuckDB (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/712" class="external-link">#712</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/explain.html" class="external-link">explain()</a></code> passes <code>...</code> to methods (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/783" class="external-link">#783</a>), and works for Redshift (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/740" class="external-link">#740</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> throws an error if you supply a named argument (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/764" class="external-link">#764</a>).</p></li>
<li><p>Joins disambiguates columns that only differ in case (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/702" class="external-link">#702</a>). New arguments <code>x_as</code> and <code>y_as</code> allow you to control the table alias used in SQL query (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/637" class="external-link">#637</a>). Joins with <code>na_matches = "na"</code> now work for DuckDB (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/704" class="external-link">#704</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute()</a></code> use named windows if a window definition is used at least twice and the backend supports named windows (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/624" class="external-link">#624</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> now supports the arguments <code>.keep</code>, <code>.before</code>, and <code>.after</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/802" class="external-link">#802</a>).</p></li>
<li><p><code>na.rm = FALSE</code> only warns once every 8 hours across all functions (<a href="https://github.com/tidyverse/dbplyr/issues/899" class="external-link">#899</a>).</p></li>
<li><p><code>nesting()</code> now supports the <code>.name_repair</code> argument (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/654" class="external-link">#654</a>).</p></li>
<li><p><code>pivot_longer()</code> can now pivot a column named <code>name</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/692" class="external-link">#692</a>), can repair names (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/694" class="external-link">#694</a>), and can work with multiple <code>names_from</code> columns (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/693" class="external-link">#693</a>).</p></li>
<li><p><code>pivot_wider(values_fn = )</code> and <code>pivot_longer(values_transform = )</code> can now be formulas (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/745" class="external-link">#745</a>).</p></li>
<li><p><code>pivot_wider()</code> now supports the arguments <code>names_vary</code>, <code>names_expand</code>, and <code>unused_fn</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/774" class="external-link">#774</a>).</p></li>
<li><p><code><a href="../reference/remote_name.html">remote_name()</a></code> now returns a name in more cases where it makes sense (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/850" class="external-link">#850</a>).</p></li>
<li><p><code><a href="../reference/db-sql.html">sql_random()</a></code> is now exported.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup()</a></code> removes variables in <code>...</code> from grouping (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/689" class="external-link">#689</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute()</a></code> now keeps grouping variables (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/802" class="external-link">#802</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.1" id="dbplyr-211">dbplyr 2.1.1<a class="anchor" aria-label="anchor" href="#dbplyr-211"></a></h2><p class="text-muted">CRAN release: 2021-04-06</p>
<ul><li><p>New support for Snowflake (<a href="https://github.com/edgararuiz" class="external-link">@edgararuiz</a>)</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">compute()</a></code>, <code><a href="../reference/db-sql.html">sql_table_index()</a></code>, and <code><a href="../reference/db-sql.html">sql_query_wrap()</a></code> now work with schemas (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/595" class="external-link">#595</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">if_any()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">if_all()</a></code> are now translated.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by()</a></code> now ungroups when the dots argument is empty and <code>.add</code> is <code>FALSE</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/615" class="external-link">#615</a>).</p></li>
<li><p><code><a href="../reference/db-quote.html">sql_escape_date()</a></code> and <code>sql_escape_datetime</code> gain methods for MS Access (<a href="https://github.com/erikvona" class="external-link">@erikvona</a>, <a href="https://github.com/tidyverse/dbplyr/issues/608" class="external-link">#608</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.0" id="dbplyr-210">dbplyr 2.1.0<a class="anchor" aria-label="anchor" href="#dbplyr-210"></a></h2><p class="text-muted">CRAN release: 2021-02-03</p>
<div class="section level3">
<h3 id="new-features-2-1-0">New features<a class="anchor" aria-label="anchor" href="#new-features-2-1-0"></a></h3>
<ul><li><p>Thanks to <a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, dbplyr gains support for key verbs from tidyr: <code>pivot_longer()</code> (<a href="https://github.com/tidyverse/dbplyr/issues/532" class="external-link">#532</a>), <code>pivot_wider()</code> (<a href="https://github.com/tidyverse/dbplyr/issues/543" class="external-link">#543</a>), <code>expand()</code> (<a href="https://github.com/tidyverse/dbplyr/issues/538" class="external-link">#538</a>), <code>complete()</code> (<a href="https://github.com/tidyverse/dbplyr/issues/538" class="external-link">#538</a>), <code>replace_na()</code> (<a href="https://github.com/tidyverse/dbplyr/issues/538" class="external-link">#538</a>), <code>fill()</code> (<a href="https://github.com/tidyverse/dbplyr/issues/566" class="external-link">#566</a>).</p></li>
<li><p><a href="https://github.com/mgirlich" class="external-link">@mgirlich</a> is now a dbplyr author in recognition of his significant and sustained contributions.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across()</a></code> implementation has been rewritten to support more inputs: it now translates formulas (<a href="https://github.com/tidyverse/dbplyr/issues/525" class="external-link">#525</a>), works with SQL functions that don’t have R translations (<a href="https://github.com/tidyverse/dbplyr/issues/534" class="external-link">#534</a>), and work with <code>NULL</code> (<a href="https://github.com/tidyverse/dbplyr/issues/554" class="external-link">#554</a>)</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise()</a></code> now supports argument <code>.groups</code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/584" class="external-link">#584</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="sql-translation-2-1-0">SQL translation<a class="anchor" aria-label="anchor" href="#sql-translation-2-1-0"></a></h3>
<ul><li><p>All backends: <code>str_sub()</code>, <code><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr()</a></code> and <code><a href="https://rdrr.io/r/base/substr.html" class="external-link">substring()</a></code> get better translations (<a href="https://github.com/tidyverse/dbplyr/issues/577" class="external-link">#577</a>). Most importantly, the results of using negative locations should match the underlying R implementations more closely.</p></li>
<li>
<p>MS SQL:</p>
<ul><li><p><code><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer()</a></code> and <code>as.integer64()</code> translations cast first to <code>NUMERIC</code> to avoid CASTing weirdness (<a href="https://github.com/DavidPatShuiFong" class="external-link">@DavidPatShuiFong</a>, <a href="https://github.com/tidyverse/dbplyr/issues/496" class="external-link">#496</a>).</p></li>
<li><p>Assumes a boolean context inside of <code>[</code> (<a href="https://github.com/tidyverse/dbplyr/issues/546" class="external-link">#546</a>)</p></li>
<li><p><code>str_sub()</code> with <code>end = -1</code> now works (<a href="https://github.com/tidyverse/dbplyr/issues/577" class="external-link">#577</a>).</p></li>
</ul></li>
<li><p>Redshift: <code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lead()</a></code> lose the <code>default</code> parameter since it’s not supported (<a href="https://github.com/hdplsa" class="external-link">@hdplsa</a>, <a href="https://github.com/tidyverse/dbplyr/issues/548" class="external-link">#548</a>).</p></li>
<li><p>SQLite: custom translation of <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">right_join()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/536" class="external-link">#536</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-2-1-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-2-1-0"></a></h3>
<ul><li><p>RPostgreSQL backend warns if <code>temporary = TRUE</code> since temporary tables are not supported by <code>RPostgreSQL::dbWriteTable()</code> (<a href="https://github.com/tidyverse/dbplyr/issues/574" class="external-link">#574</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count()</a></code> method provides closer match to dplyr semantics (<a href="https://github.com/tidyverse/dbplyr/issues/347" class="external-link">#347</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct()</a></code> now respects grouping (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/535" class="external-link">#535</a>).</p></li>
<li><p><code><a href="../reference/db-misc.html">db_connection_describe()</a></code> no longer uses partial matching (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/564" class="external-link">#564</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull()</a></code> no longer <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code>s the result when there’s already only one variable (<a href="https://github.com/tidyverse/dbplyr/issues/562" class="external-link">#562</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> no longer relocates grouping variables to the front (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/568" class="external-link">#568</a>). and informs when adding missing grouping variables (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/559" class="external-link">#559</a>).</p></li>
<li><p><code>tbl.src_dbi(...)</code> now passed on to <code><a href="../reference/tbl_sql.html">tbl_sql()</a></code> (<a href="https://github.com/tidyverse/dbplyr/issues/530" class="external-link">#530</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.0.0" id="dbplyr-200">dbplyr 2.0.0<a class="anchor" aria-label="anchor" href="#dbplyr-200"></a></h2><p class="text-muted">CRAN release: 2020-11-03</p>
<div class="section level3">
<h3 id="dplyr-compatibility-2-0-0">dplyr 1.0.0 compatibility<a class="anchor" aria-label="anchor" href="#dplyr-compatibility-2-0-0"></a></h3>
<ul><li><p><code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across()</a></code> is now translated into individual SQL statements (<a href="https://github.com/tidyverse/dbplyr/issues/480" class="external-link">#480</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> support dplyr 1.0.0 tidyselect syntax (apart from predicate functions which can’t easily work on computed queries) (<a href="https://github.com/tidyverse/dbplyr/issues/502" class="external-link">#502</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/relocate.html" class="external-link">relocate()</a></code> makes it easy to move columns (<a href="https://github.com/tidyverse/dbplyr/issues/494" class="external-link">#494</a>) and <code><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename_with()</a></code> makes it easy to rename columns programmatically (<a href="https://github.com/tidyverse/dbplyr/issues/502" class="external-link">#502</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_min()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_max()</a></code>, and <code>slice_order()</code> are now supported. <code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_tail()</a></code> throw clear error messages (<a href="https://github.com/tidyverse/dbplyr/issues/394" class="external-link">#394</a>)</p></li>
</ul></div>
<div class="section level3">
<h3 id="sql-generation-2-0-0">SQL generation<a class="anchor" aria-label="anchor" href="#sql-generation-2-0-0"></a></h3>
<ul><li><p>Documentation has been radically improved with new topics for each major verb and each backend giving more details about the SQL translation.</p></li>
<li><p><code><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">intersect()</a></code>, <code><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">union()</a></code> and <code><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">setdiff()</a></code> gain an <code>all</code> argument to add the <code>ALL</code> argument (<a href="https://github.com/tidyverse/dbplyr/issues/414" class="external-link">#414</a>).</p></li>
<li><p>Join functions gains a <code>na_matches</code> argument that allows you to control whether or not <code>NA</code> (<code>NULL</code>) values match other <code>NA</code> values. The default is <code>"never"</code>, which is the usual behaviour in databases. You can set <code>na_matches = "na"</code> to match R’s usual join behaviour (<a href="https://github.com/tidyverse/dbplyr/issues/180" class="external-link">#180</a>). Additional arguments error (instead of being silently swallowed) (<a href="https://github.com/tidyverse/dbplyr/issues/382" class="external-link">#382</a>).</p></li>
<li><p>Joins now only use aliases where needed to disambiguate columns; this should make generated queries more readable.</p></li>
<li><p>Subqueries no longer include an <code>ORDER BY</code> clause. This is not part of the SQL spec, and has very limited support across databases. Now such queries generate a warning suggesting that you move your <code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange()</a></code> call later in the pipeline (<a href="https://github.com/tidyverse/dbplyr/issues/276" class="external-link">#276</a>). (There’s one exception: <code>ORDER BY</code> is still generated if <code>LIMIT</code> is present; this tends to affect the returns rows but not necessarily their order).</p></li>
<li><p>Subquery names are now scoped within the query. This makes query text deterministic which helps some query optimisers/cachers (<a href="https://github.com/tidyverse/dbplyr/issues/336" class="external-link">#336</a>).</p></li>
<li><p><code><a href="../reference/sql_build.html">sql_optimise()</a></code> now can partially optimise a pipeline; due to an unfortunate bug it previously gave up too easily.</p></li>
<li><p><code><a href="../reference/in_schema.html">in_schema()</a></code> quotes each input individually (<a href="https://github.com/tidyverse/dbplyr/issues/287" class="external-link">#287</a>) (use <code><a href="../reference/sql.html">sql()</a></code> to opt out of quoting, if needed). And <code><a href="https://dbi.r-dbi.org/reference/Id.html" class="external-link">DBI::Id()</a></code> should work anywhere that <code><a href="../reference/in_schema.html">in_schema()</a></code> does.</p></li>
</ul></div>
<div class="section level3">
<h3 id="sql-translation-2-0-0">SQL translation<a class="anchor" aria-label="anchor" href="#sql-translation-2-0-0"></a></h3>
<ul><li><p>Experimental new SAP HANA backend (<a href="https://github.com/tidyverse/dbplyr/issues/233" class="external-link">#233</a>). Requires the latest version of odbc.</p></li>
<li>
<p>All backends:</p>
<ul><li><p>You can now use <code>::</code> in translations, so that (e.g.) <code><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">dbplyr::n()</a></code> is translated to <code>count(*)</code> (<a href="https://github.com/tidyverse/dbplyr/issues/207" class="external-link">#207</a>).</p></li>
<li><p><code>[[</code> can now also translate numeric indices (<a href="https://github.com/tidyverse/dbplyr/issues/520" class="external-link">#520</a>).</p></li>
<li><p><code>%/%</code> now generates a clear error message; previously it was translated to <code>/</code> which is not correct (<a href="https://github.com/tidyverse/dbplyr/issues/108" class="external-link">#108</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n()</a></code> is translated to <code>count(*)</code> instead of <code><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count()</a></code> (<a href="https://github.com/tidyverse/dbplyr/issues/343" class="external-link">#343</a>).</p></li>
<li><p><code>sub_str()</code> translation is more consistent in edge cases (<a href="https://github.com/ianmcook" class="external-link">@ianmcook</a>).</p></li>
<li><p>All <code><a href="https://rdrr.io/r/stats/median.html" class="external-link">median()</a></code> (<a href="https://github.com/lorenzwalthert" class="external-link">@lorenzwalthert</a>, <a href="https://github.com/tidyverse/dbplyr/issues/483" class="external-link">#483</a>), <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin()</a></code>, <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax()</a></code> (<a href="https://github.com/tidyverse/dbplyr/issues/479" class="external-link">#479</a>), <code><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd()</a></code> and <code><a href="https://rdrr.io/r/stats/cor.html" class="external-link">var()</a></code> functions have an <code>na.rm</code> argument that warns once when not <code>TRUE</code>. This makes them consistent with <code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code> and <code><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum()</a></code>.</p></li>
<li><p><code><a href="https://rdrr.io/r/base/substr.html" class="external-link">substring()</a></code> is now translated the same way as <code><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr()</a></code> (<a href="https://github.com/tidyverse/dbplyr/issues/378" class="external-link">#378</a>).</p></li>
</ul></li>
<li><p><a href="https://blob.tidyverse.org/" class="external-link">blob</a> vectors can now be used with <code>!!</code> and <code>!!!</code> operators, for example in <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> (<a href="https://github.com/okhoma" class="external-link">@okhoma</a>, <a href="https://github.com/tidyverse/dbplyr/issues/433" class="external-link">#433</a>)</p></li>
<li><p>MySQL uses standard SQL for index creation.</p></li>
<li><p>MS SQL translation does better a distinguishing between bit and boolean (<a href="https://github.com/tidyverse/dbplyr/issues/377" class="external-link">#377</a>, <a href="https://github.com/tidyverse/dbplyr/issues/318" class="external-link">#318</a>). <code>if</code> and <code>ifelse</code> once again generate <code>IIF</code>, creating simpler expressions. <code>as.*()</code> function uses <code>TRY_CAST()</code> instead of <code>CAST()</code> for version 11+ (2012+) (<a href="https://github.com/DavidPatShuiFong" class="external-link">@DavidPatShuiFong</a>, <a href="https://github.com/tidyverse/dbplyr/issues/380" class="external-link">#380</a>).</p></li>
<li><p>odbc no longer translates <code><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count()</a></code>; this was an accidental inclusion.</p></li>
<li><p>Oracle translation now depends on Oracle 12c, and uses a “row-limiting” clause for <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code>. It gains translations for <code>today()</code> and <code>now()</code>, and improved <code><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date()</a></code> translation (<a href="https://github.com/rlh1994" class="external-link">@rlh1994</a>, <a href="https://github.com/tidyverse/dbplyr/issues/267" class="external-link">#267</a>).</p></li>
<li><p>PostgreSQL: new translations for lubridate period functions <code>years()</code>, <code><a href="https://rdrr.io/r/base/weekday.POSIXt.html" class="external-link">months()</a></code>, <code>days()</code>, and <code>floor_date()</code> (<a href="https://github.com/bkkkk" class="external-link">@bkkkk</a>, <a href="https://github.com/tidyverse/dbplyr/issues/333" class="external-link">#333</a>) and stringr functions <code>str_squish()</code>, <code>str_remove()</code>, and <code>str_remove_all()</code> (<a href="https://github.com/shosaco" class="external-link">@shosaco</a>).</p></li>
<li>
<p>New RedShift translations when used with <code><a href="https://rpostgres.r-dbi.org/reference/Redshift.html" class="external-link">RPostgres::Redshift()</a></code>.</p>
<ul><li><p><code>str_replace()</code> errors since there’s no Redshift translation, and <code>str_replace_all()</code> uses <code>REGEXP_REPLACE()</code> (<a href="https://github.com/tidyverse/dbplyr/issues/446" class="external-link">#446</a>).</p></li>
<li><p><code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste()</a></code> and <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0()</a></code> use <code>||</code> (<a href="https://github.com/tidyverse/dbplyr/issues/458" class="external-link">#458</a>).</p></li>
<li><p><code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric()</a></code> and <code><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double()</a></code> cast to <code>FLOAT</code> (<a href="https://github.com/tidyverse/dbplyr/issues/408" class="external-link">#408</a>).</p></li>
<li><p><code><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr()</a></code> and <code>str_sub()</code> use <code>SUBSTRING()</code> (<a href="https://github.com/tidyverse/dbplyr/issues/327" class="external-link">#327</a>).</p></li>
</ul></li>
<li><p>SQLite gains translations for lubridate functions <code>today()</code>, <code>now()</code>, <code>year()</code>, <code>month()</code>, <code>day()</code>, <code>hour()</code>, <code>minute()</code>, <code>second()</code>,<code>yday()</code> (<a href="https://github.com/tidyverse/dbplyr/issues/262" class="external-link">#262</a>), and correct translation for <code><a href="https://rdrr.io/r/stats/median.html" class="external-link">median()</a></code> (<a href="https://github.com/tidyverse/dbplyr/issues/357" class="external-link">#357</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="extensibility-2-0-0">Extensibility<a class="anchor" aria-label="anchor" href="#extensibility-2-0-0"></a></h3>
<p>If you are the author of a dbplyr backend, please see <code><a href="../articles/backend-2.html">vignette("backend-2")</a></code> for details.</p>
<ul><li><p>New <code><a href="../reference/db-misc.html">dbplyr_edition()</a></code> generic allows you to opt-in to the 2nd edition of the dbplyr API.</p></li>
<li>
<p><code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_write_table()</a></code> now calls <code><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">DBI::dbWriteTable()</a></code> instead of nine generics that formerly each did a small part: <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_create_indexes()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_begin()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_rollback()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_commit()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_list_tables()</a></code>, <code>drop_drop_table()</code>, <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_has_table()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_create_table()</a></code>, and <code>db_data_types()</code>. You can now delete the methods for these generics.</p>
<p><code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_query_rows()</a></code> is no longer used; it appears that it hasn’t been used for some time, so if you have a method, you can delete it.</p>
</li>
<li><p><code><a href="https://dbi.r-dbi.org/reference/dbQuoteIdentifier.html" class="external-link">DBI::dbQuoteIdentifier()</a></code> is now used instead of <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">sql_escape_ident()</a></code> and <code><a href="https://dbi.r-dbi.org/reference/dbQuoteString.html" class="external-link">DBI::dbQuoteString()</a></code> instead of <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">sql_escape_string()</a></code>.</p></li>
<li>
<p>A number of <code>db_*</code> generics have been replaced with new SQL generation generics:</p>
<ul><li>
<code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">dplyr::db_analyze()</a></code> -&gt; <code><a href="../reference/db-sql.html">dbplyr::sql_table_analyze()</a></code>
</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">dplyr::db_create_index()</a></code> -&gt; <code><a href="../reference/db-sql.html">dbplyr::sql_table_index()</a></code>
</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">dplyr::db_explain()</a></code> -&gt; <code>dbplyr::sql_queriy_explain()</code>
</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">dplyr::db_query_fields()</a></code> -&gt; <code><a href="../reference/db-sql.html">dbplyr::sql_query_fields()</a></code>
</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">dplyr::db_save_query()</a></code> -&gt; <code><a href="../reference/db-sql.html">dbplyr::sql_query_save()</a></code>
</li>
</ul><p>This makes them easier to test and is an important part of the process of moving all database generics in dbplyr (<a href="https://github.com/tidyverse/dbplyr/issues/284" class="external-link">#284</a>).</p>
</li>
<li>
<p>A number of other generics have been renamed to facilitate the move from dplyr to dbplyr:</p>
<ul><li>
<code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">dplyr::sql_select()</a></code> -&gt; <code><a href="../reference/db-sql.html">dbplyr::sql_query_select()</a></code>
</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">dplyr::sql_join()</a></code> -&gt; <code><a href="../reference/db-sql.html">dbplyr::sql_query_join()</a></code>
</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">dplyr::sql_semi_join()</a></code> -&gt; <code><a href="../reference/db-sql.html">dbplyr::sql_query_semi_join()</a></code>
</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">dplyr::sql_set_op()</a></code> -&gt; <code><a href="../reference/db-sql.html">dbplyr::sql_query_set_op()</a></code>
</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">dplyr::sql_subquery()</a></code> -&gt; <code><a href="../reference/db-sql.html">dbplyr::sql_query_wrap()</a></code>
</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">dplyr::db_desc()</a></code> -&gt; <code><a href="../reference/db-misc.html">dbplyr::db_connection_describe()</a></code>
</li>
</ul></li>
<li><p>New <code>db_temporary_table()</code> generic makes it easier to work with databases that require temporary tables to be specially named.</p></li>
<li><p>New <code><a href="../reference/db-sql.html">sql_expr_matches()</a></code> generic allows databases to use more efficient alternatives when determine if two values “match” (i.e. like equality but a pair of <code>NULL</code>s will also match). For more details, see <a href="https://modern-sql.com/feature/is-distinct-from" class="external-link uri">https://modern-sql.com/feature/is-distinct-from</a></p></li>
<li><p>New <code><a href="../reference/db-misc.html">sql_join_suffix()</a></code> allows backends to control the default suffixes used (<a href="https://github.com/tidyverse/dbplyr/issues/254" class="external-link">#254</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-2-0-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-2-0-0"></a></h3>
<ul><li><p>All old lazy eval shims have been removed. These have been deprecated for some time.</p></li>
<li><p>Date-time escaping methods for Athena and Presto have moved to the packages where they belong.</p></li>
<li><p>Attempting to embed a Shiny reactive in a query now gives a helpful error (<a href="https://github.com/tidyverse/dbplyr/issues/439" class="external-link">#439</a>).</p></li>
<li><p><code><a href="../reference/lahman.html">copy_lahman()</a></code> and <code><a href="../reference/nycflights13.html">copy_nycflights13()</a></code> (and hence <code><a href="../reference/nycflights13.html">nycflights13_sqlite()</a></code>) and friends now return DBI connections rather than the now deprecated <code><a href="../reference/src_dbi.html">src_dbi()</a></code> (<a href="https://github.com/tidyverse/dbplyr/issues/440" class="external-link">#440</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to()</a></code> can now <code>overwrite</code> when table is specified with schema (<a href="https://github.com/tidyverse/dbplyr/issues/489" class="external-link">#489</a>), and gains an <code>in_transaction</code> argument used to optionally suppress the transaction wrapper (<a href="https://github.com/tidyverse/dbplyr/issues/368" class="external-link">#368</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct()</a></code> no longer duplicates column if grouped (<a href="https://github.com/tidyverse/dbplyr/issues/354" class="external-link">#354</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute()</a></code> now correctly tracks variables it needs when creating subqueries (<a href="https://github.com/tidyverse/dbplyr/issues/313" class="external-link">#313</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> grouping variables no longer generates a downstream error (<a href="https://github.com/tidyverse/dbplyr/issues/396" class="external-link">#396</a>)</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> correctly generates subqueries when you re-use the same variable three or more times (<a href="https://github.com/tidyverse/dbplyr/issues/412" class="external-link">#412</a>).</p></li>
<li><p><code><a href="../reference/window_order.html">window_order()</a></code> overrides ordering, rather than appending to it.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.4.4" id="dbplyr-144">dbplyr 1.4.4<a class="anchor" aria-label="anchor" href="#dbplyr-144"></a></h2><p class="text-muted">CRAN release: 2020-05-27</p>
<ul><li><p>Internally <code><a href="https://dbi.r-dbi.org/reference/dbExecute.html" class="external-link">DBI::dbExecute()</a></code> now uses <code>immediate = TRUE</code>; this improves support for session-scoped temporary tables in MS SQL (<a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>, <a href="https://github.com/tidyverse/dbplyr/issues/438" class="external-link">#438</a>).</p></li>
<li><p>Subqueries with <code>ORDER BY</code> use <code>TOP 9223372036854775807</code> instead of <code>TOP 100 PERCENT</code> on SQL Server for compatibility with Azure Data Warehouse (<a href="https://github.com/tidyverse/dbplyr/issues/337" class="external-link">#337</a>, <a href="https://github.com/alexkyllo" class="external-link">@alexkyllo</a>).</p></li>
<li><p><code><a href="../reference/escape.html">escape()</a></code> now supports <code>blob</code> vectors using new <code><a href="../reference/db-quote.html">sql_escape_raw()</a></code> generic. It enables using <a href="https://blob.tidyverse.org/" class="external-link">blob</a> variables in dplyr verbs, for example to filter nvarchar values by UTF-16 blobs (see <a href="https://github.com/r-dbi/DBI/issues/215#issuecomment-356376133" class="external-link uri">https://github.com/r-dbi/DBI/issues/215#issuecomment-356376133</a>). (<a href="https://github.com/okhoma" class="external-link">@okhoma</a>, <a href="https://github.com/tidyverse/dbplyr/issues/433" class="external-link">#433</a>)</p></li>
<li><p>Added <code><a href="https://rdrr.io/r/methods/setOldClass.html" class="external-link">setOldClass()</a></code> calls for <code>"ident"</code> and <code>"ident_q"</code> classes for compatibility with dplyr 1.0.0 (<a href="https://github.com/tidyverse/dbplyr/issues/448" class="external-link">#448</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
<li><p>Postgres <code>str_detect()</code> translation uses same argument names as stringr, and gains a <code>negate</code> argument (<a href="https://github.com/tidyverse/dbplyr/issues/444" class="external-link">#444</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">semi_join()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">anti_join()</a></code> now correctly support the <code>sql_on</code> argument (<a href="https://github.com/tidyverse/dbplyr/issues/443" class="external-link">#443</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.4.3" id="dbplyr-143">dbplyr 1.4.3<a class="anchor" aria-label="anchor" href="#dbplyr-143"></a></h2><p class="text-muted">CRAN release: 2020-04-19</p>
<ul><li><p>dbplyr now uses RPostgres (instead of RPostgreSQL) and RMariaDB (instead of RMySQL) for its internal tests and data functions (<a href="https://github.com/tidyverse/dbplyr/issues/427" class="external-link">#427</a>).</p></li>
<li><p>The Date and POSIXt methods for <code><a href="../reference/escape.html">escape()</a></code> now use exported <code><a href="../reference/db-quote.html">sql_escape_date()</a></code> and <code><a href="../reference/db-quote.html">sql_escape_datetime()</a></code> generics to allow backend specific formatting of date and datetime literals. These are used to provide methods for Athena and Presto backends (<a href="https://github.com/OssiLehtinen" class="external-link">@OssiLehtinen</a>, <a href="https://github.com/tidyverse/dbplyr/issues/384" class="external-link">#384</a>, <a href="https://github.com/tidyverse/dbplyr/issues/391" class="external-link">#391</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/nth.html" class="external-link">first()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/nth.html" class="external-link">last()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/nth.html" class="external-link">nth()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lead()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag()</a></code> now respect the <code><a href="../reference/window_order.html">window_frame()</a></code> (<a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>, <a href="https://github.com/tidyverse/dbplyr/issues/366" class="external-link">#366</a>).</p></li>
<li><p>SQL server: new translations for <code>str_flatten()</code> (<a href="https://github.com/PauloJhonny" class="external-link">@PauloJhonny</a>, <a href="https://github.com/tidyverse/dbplyr/issues/405" class="external-link">#405</a>).</p></li>
<li><p>SQL server: temporary datasets are now session-local, not global (<a href="https://github.com/tidyverse/dbplyr/issues/401" class="external-link">#401</a>).</p></li>
<li><p>Postgres: correct <code>str_detect()</code>, <code>str_replace()</code> and <code>str_replace_all()</code> translation (<a href="https://github.com/shosaco" class="external-link">@shosaco</a>, <a href="https://github.com/tidyverse/dbplyr/issues/362" class="external-link">#362</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.4.2" id="dbplyr-142">dbplyr 1.4.2<a class="anchor" aria-label="anchor" href="#dbplyr-142"></a></h2><p class="text-muted">CRAN release: 2019-06-17</p>
<ul><li><p>Fix bug when partially evaluating unquoting quosure containing a single symbol (<a href="https://github.com/tidyverse/dbplyr/issues/317" class="external-link">#317</a>)</p></li>
<li><p>Fixes for rlang and dpylr compatibility.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.4.1" id="dbplyr-141">dbplyr 1.4.1<a class="anchor" aria-label="anchor" href="#dbplyr-141"></a></h2><p class="text-muted">CRAN release: 2019-06-05</p>
<p>Minor improvements to SQL generation</p>
<ul><li><p><code>x %in% y</code> strips names of <code>y</code> (<a href="https://github.com/tidyverse/dbplyr/issues/269" class="external-link">#269</a>).</p></li>
<li><p>Enhancements for scoped verbs (<code><a href="https://dplyr.tidyverse.org/reference/mutate_all.html" class="external-link">mutate_all()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/summarise_all.html" class="external-link">summarise_if()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/filter_all.html" class="external-link">filter_at()</a></code> etc) (<a href="https://github.com/tidyverse/dbplyr/issues/296" class="external-link">#296</a>, <a href="https://github.com/tidyverse/dbplyr/issues/306" class="external-link">#306</a>).</p></li>
<li><p>MS SQL use <code>TOP 100 PERCENT</code> as stop-gap to allow subqueries with <code>ORDER BY</code> (<a href="https://github.com/tidyverse/dbplyr/issues/277" class="external-link">#277</a>).</p></li>
<li><p>Window functions now translated correctly for Hive (<a href="https://github.com/tidyverse/dbplyr/issues/293" class="external-link">#293</a>, <a href="https://github.com/cderv" class="external-link">@cderv</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.4.0" id="dbplyr-140">dbplyr 1.4.0<a class="anchor" aria-label="anchor" href="#dbplyr-140"></a></h2><p class="text-muted">CRAN release: 2019-04-23</p>
<div class="section level3">
<h3 id="breaking-changes-1-4-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-1-4-0"></a></h3>
<ul><li><p><code>Error: `con` must not be NULL</code>: If you see this error, it probably means that you have forgotten to pass <code>con</code> down to a dbplyr function. Previously, dbplyr defaulted to using <code><a href="../reference/simulate_dbi.html">simulate_dbi()</a></code> which introduced subtle escaping bugs. (It’s also possible I have forgotten to pass it somewhere that the dbplyr tests don’t pick up, so if you can’t figure it out, please let me know).</p></li>
<li><p>Subsetting (<code>[[</code>, <code>$</code>, and <code>[</code>) functions are no longer evaluated locally. This makes the translation more consistent and enables useful new idioms for modern databases (<a href="https://github.com/tidyverse/dbplyr/issues/200" class="external-link">#200</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-4-0">New features<a class="anchor" aria-label="anchor" href="#new-features-1-4-0"></a></h3>
<ul><li><p>MySQL/MariaDB (<a href="https://mariadb.com/kb/en/library/window-functions/" class="external-link uri">https://mariadb.com/kb/en/library/window-functions/</a>) and SQLite (<a href="https://www.sqlite.org/windowfunctions.html" class="external-link uri">https://www.sqlite.org/windowfunctions.html</a>) translations gain support for window functions, available in Maria DB 10.2, MySQL 8.0, and SQLite 3.25 (<a href="https://github.com/tidyverse/dbplyr/issues/191" class="external-link">#191</a>).</p></li>
<li>
<p>Overall, dplyr generates many fewer subqueries:</p>
<ul><li><p>Joins and semi-joins no longer add an unneeded subquery (<a href="https://github.com/tidyverse/dbplyr/issues/236" class="external-link">#236</a>). This is facilitated by the new <code>bare_identifier_ok</code> argument to <code><a href="../reference/sql_build.html">sql_render()</a></code>; the previous argument was called <code>root</code> and confused me.</p></li>
<li><p>Many sequences of <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code>, and <code><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute()</a></code> can be collapsed into a single query, instead of always generating a subquery (<a href="https://github.com/tidyverse/dbplyr/issues/213" class="external-link">#213</a>).</p></li>
</ul></li>
<li><p>New <code><a href="../articles/sql.html">vignette("sql")</a></code> describes some advantages of dbplyr over SQL (<a href="https://github.com/tidyverse/dbplyr/issues/205" class="external-link">#205</a>) and gives some advice about writing literal SQL inside of dplyr, when you need to (<a href="https://github.com/tidyverse/dbplyr/issues/196" class="external-link">#196</a>).</p></li>
<li><p>New <code><a href="../articles/reprex.html">vignette("reprex")</a></code> gives some hints on creating reprexes that work anywhere (<a href="https://github.com/tidyverse/dbplyr/issues/117" class="external-link">#117</a>). This is supported by a new <code><a href="../reference/memdb_frame.html">tbl_memdb()</a></code> that matches the existing <code><a href="../reference/tbl_lazy.html">tbl_lazy()</a></code>.</p></li>
<li><p>All <code>..._join()</code> functions gain an <code>sql_on</code> argument that allows specifying arbitrary join predicates in SQL code (<a href="https://github.com/tidyverse/dbplyr/issues/146" class="external-link">#146</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="sql-translations-1-4-0">SQL translations<a class="anchor" aria-label="anchor" href="#sql-translations-1-4-0"></a></h3>
<ul><li><p>New translations for some lubridate functions: <code>today()</code>, <code>now()</code>, <code>year()</code>, <code>month()</code>, <code>day()</code>, <code>hour()</code>, <code>minute()</code>, <code>second()</code>, <code>quarter()</code>, <code>yday()</code> (<a href="https://github.com/colearendt" class="external-link">@colearendt</a>, <a href="https://github.com/derekmorr" class="external-link">@derekmorr</a>). Also added new translation for <code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct()</a></code>.</p></li>
<li><p>New translations for stringr functions: <code>str_c()</code>, <code>str_sub()</code>, <code>str_length()</code>, <code>str_to_upper()</code>, <code>str_to_lower()</code>, and <code>str_to_title()</code> (<a href="https://github.com/colearendt" class="external-link">@colearendt</a>). Non-translated stringr functions throw a clear error.</p></li>
<li><p>New translations for bitwise operations: <code><a href="https://rdrr.io/r/base/bitwise.html" class="external-link">bitwNot()</a></code>, <code><a href="https://rdrr.io/r/base/bitwise.html" class="external-link">bitwAnd()</a></code>, <code><a href="https://rdrr.io/r/base/bitwise.html" class="external-link">bitwOr()</a></code>, <code><a href="https://rdrr.io/r/base/bitwise.html" class="external-link">bitwXor()</a></code>, <code><a href="https://rdrr.io/r/base/bitwise.html" class="external-link">bitwShiftL()</a></code>, and <code><a href="https://rdrr.io/r/base/bitwise.html" class="external-link">bitwShiftR()</a></code>. Unlike the base R functions, the translations do not coerce arguments to integers (<a href="https://github.com/davidchall" class="external-link">@davidchall</a>, <a href="https://github.com/tidyverse/dbplyr/issues/235" class="external-link">#235</a>).</p></li>
<li><p>New translation for <code>x[y]</code> to <code>CASE WHEN y THEN x END</code>. This enables <code>sum(a[b == 0])</code> to work as you expect from R (<a href="https://github.com/tidyverse/dbplyr/issues/202" class="external-link">#202</a>). <code>y</code> needs to be a logical expression; if not you will likely get a type error from your database.</p></li>
<li><p>New translations for <code>x$y</code> and <code>x[["y"]]</code> to <code>x.y</code>, enabling you to index into nested fields in databases that provide them (<a href="https://github.com/tidyverse/dbplyr/issues/158" class="external-link">#158</a>).</p></li>
<li><p>The <code>.data</code> and <code>.env</code> pronouns of tidy evaluation are correctly translated (<a href="https://github.com/tidyverse/dbplyr/issues/132" class="external-link">#132</a>).</p></li>
<li><p>New translation for <code><a href="https://rdrr.io/r/stats/median.html" class="external-link">median()</a></code> and <code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile()</a></code>. Works for all ANSI compliant databases (SQL Server, Postgres, MariaDB, Teradata) and has custom translations for Hive. Thanks to <a href="https://github.com/edavidaja" class="external-link">@edavidaja</a> for researching the SQL variants! (<a href="https://github.com/tidyverse/dbplyr/issues/169" class="external-link">#169</a>)</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/na_if.html" class="external-link">na_if()</a></code> is correct translated to <code>NULLIF()</code> (rather than <code>NULL_IF</code>) (<a href="https://github.com/tidyverse/dbplyr/issues/211" class="external-link">#211</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/n_distinct.html" class="external-link">n_distinct()</a></code> translation throws an error when given more than one argument. (<a href="https://github.com/tidyverse/dbplyr/issues/101" class="external-link">#101</a>, <a href="https://github.com/tidyverse/dbplyr/issues/133" class="external-link">#133</a>).</p></li>
<li><p>New default translations for <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste()</a></code>, <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0()</a></code>, and the hyperbolic functions (these previously were only available for ODBC databases).</p></li>
<li><p>Corrected translations of <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin()</a></code> and <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax()</a></code> to <code>LEAST()</code> and <code>GREATEST()</code> for ANSI compliant databases (<a href="https://github.com/tidyverse/dbplyr/issues/118" class="external-link">#118</a>), to <code>MIN()</code> and <code>MAX()</code> for SQLite, and to an error for SQL server.</p></li>
<li><p>New translation for <code><a href="https://rdrr.io/r/base/switch.html" class="external-link">switch()</a></code> to the simple form of <code>CASE WHEN</code> (<a href="https://github.com/tidyverse/dbplyr/issues/192" class="external-link">#192</a>).</p></li>
</ul><div class="section level4">
<h4 id="sql-simulation-1-4-0">SQL simulation<a class="anchor" aria-label="anchor" href="#sql-simulation-1-4-0"></a></h4>
<p>SQL simulation makes it possible to see what dbplyr will translate SQL to, without having an active database connection, and is used for testing and generating reprexes.</p>
<ul><li><p>SQL simulation has been overhauled. It now works reliably, is better documented, and always uses ANSI escaping (i.e. <code>`</code> for field names and <code>'</code> for strings).</p></li>
<li><p><code><a href="../reference/tbl_lazy.html">tbl_lazy()</a></code> now actually puts a <code><a href="https://dplyr.tidyverse.org/reference/src.html" class="external-link">dbplyr::src</a></code> in the <code>$src</code> field. This shouldn’t affect any downstream code unless you were previously working around this weird difference between <code>tbl_lazy</code> and <code>tbl_sql</code> classes. It also includes the <code>src</code> class in its class, and when printed, shows the generated SQL (<a href="https://github.com/tidyverse/dbplyr/issues/111" class="external-link">#111</a>).</p></li>
</ul></div>
</div>
<div class="section level3">
<h3 id="database-specific-improvements-1-4-0">Database specific improvements<a class="anchor" aria-label="anchor" href="#database-specific-improvements-1-4-0"></a></h3>
<ul><li>
<p>MySQL/MariaDB</p>
<ul><li><p>Translations also applied to connections via the odbc package (<a href="https://github.com/colearendt" class="external-link">@colearendt</a>, <a href="https://github.com/tidyverse/dbplyr/issues/238" class="external-link">#238</a>)</p></li>
<li><p>Basic support for regular expressions via <code>str_detect()</code> and<br><code>str_replace_all()</code> (<a href="https://github.com/colearendt" class="external-link">@colearendt</a>, <a href="https://github.com/tidyverse/dbplyr/issues/168" class="external-link">#168</a>).</p></li>
<li><p>Improved translation for <code>as.logical(x)</code> to <code>IF(x, TRUE, FALSE)</code>.</p></li>
</ul></li>
<li>
<p>Oracle</p>
<ul><li>New custom translation for <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste()</a></code> and <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0()</a></code> (<a href="https://github.com/cderv" class="external-link">@cderv</a>, <a href="https://github.com/tidyverse/dbplyr/issues/221" class="external-link">#221</a>)</li>
</ul></li>
<li>
<p>Postgres</p>
<ul><li>Basic support for regular expressions via <code>str_detect()</code> and<br><code>str_replace_all()</code> (<a href="https://github.com/colearendt" class="external-link">@colearendt</a>, <a href="https://github.com/tidyverse/dbplyr/issues/168" class="external-link">#168</a>).</li>
</ul></li>
<li>
<p>SQLite</p>
<ul><li>
<code><a href="https://dplyr.tidyverse.org/reference/explain.html" class="external-link">explain()</a></code> translation now generates <code>EXPLAIN QUERY PLAN</code> which generates a higher-level, more human friendly explanation.</li>
</ul></li>
<li>
<p>SQL server</p>
<ul><li><p>Improved translation for <code>as.logical(x)</code> to <code>CAST(x as BIT)</code> (<a href="https://github.com/tidyverse/dbplyr/issues/250" class="external-link">#250</a>).</p></li>
<li><p>Translates <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste()</a></code>, <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0()</a></code>, and <code>str_c()</code> to <code>+</code>.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to()</a></code> method applies temporary table name transformation earlier so that you can now overwrite temporary tables (<a href="https://github.com/tidyverse/dbplyr/issues/258" class="external-link">#258</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_write_table()</a></code> method uses correct argument name for passing along field types (<a href="https://github.com/tidyverse/dbplyr/issues/251" class="external-link">#251</a>).</p></li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-1-4-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-1-4-0"></a></h3>
<ul><li><p>Aggregation functions only warn once per session about the use of <code>na.rm = TRUE</code> (<a href="https://github.com/tidyverse/dbplyr/issues/216" class="external-link">#216</a>).</p></li>
<li><p>table names generated by <code>random_table_name()</code> have the prefix “dbplyr_”, which makes it easier to find them programmatically (<a href="https://github.com/mattle24" class="external-link">@mattle24</a>, <a href="https://github.com/tidyverse/dbplyr/issues/111" class="external-link">#111</a>)</p></li>
<li><p>Functions that are only available in a windowed (<code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code>) query now throw an error when called in a aggregate (<code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise()</a></code>) query (<a href="https://github.com/tidyverse/dbplyr/issues/129" class="external-link">#129</a>)</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange()</a></code> understands the <code>.by_group</code> argument, making it possible sort by groups if desired. The default is <code>FALSE</code> (<a href="https://github.com/tidyverse/dbplyr/issues/115" class="external-link">#115</a>)</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct()</a></code> now handles computed variables like <code>distinct(df, y = x + y)</code> (<a href="https://github.com/tidyverse/dbplyr/issues/154" class="external-link">#154</a>).</p></li>
<li><p><code><a href="../reference/escape.html">escape()</a></code>, <code><a href="../reference/sql_expr.html">sql_expr()</a></code> and <code><a href="../reference/build_sql.html">build_sql()</a></code> no longer accept <code>con = NULL</code> as a shortcut for <code>con = simulate_dbi()</code>. This made it too easy to forget to pass <code>con</code> along, introducing extremely subtle escaping bugs. <code><a href="../reference/win_over.html">win_over()</a></code> gains a <code>con</code> argument for the same reason.</p></li>
<li><p>New <code><a href="../reference/escape.html">escape_ansi()</a></code> always uses ANSI SQL 92 standard escaping (for use in examples and documentation).</p></li>
<li><p><code>mutate(df, x = NULL)</code> drops <code>x</code> from the output, just like when working with local data frames (<a href="https://github.com/tidyverse/dbplyr/issues/194" class="external-link">#194</a>).</p></li>
<li><p><code><a href="../reference/partial_eval.html">partial_eval()</a></code> processes inlined functions (including rlang lambda functions). This makes dbplyr work with more forms of scoped verbs like <code>df %&gt;% summarise_all(~ mean(.))</code>, <code>df %&gt;% summarise_all(list(mean))</code> (<a href="https://github.com/tidyverse/dbplyr/issues/134" class="external-link">#134</a>).</p></li>
<li><p><code><a href="../reference/sql_variant.html">sql_aggregate()</a></code> now takes an optional argument <code>f_r</code> for passing to <code>check_na_rm()</code>. This allows the warning to show the R function name rather than the SQL function name (<a href="https://github.com/sverchkov" class="external-link">@sverchkov</a>, <a href="https://github.com/tidyverse/dbplyr/issues/153" class="external-link">#153</a>).</p></li>
<li><p><code><a href="../reference/sql_variant.html">sql_infix()</a></code> gains a <code>pad</code> argument for the rare operator that doesn’t need to be surrounded by spaces.</p></li>
<li><p><code><a href="../reference/sql_variant.html">sql_prefix()</a></code> no longer turns SQL functions into uppercase, allowing for correct translation of case-sensitive SQL functions (<a href="https://github.com/tidyverse/dbplyr/issues/181" class="external-link">#181</a>, <a href="https://github.com/mtoto" class="external-link">@mtoto</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise()</a></code> gives a clear error message if you refer to a variable created in that same <code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise()</a></code> (<a href="https://github.com/tidyverse/dbplyr/issues/114" class="external-link">#114</a>).</p></li>
<li><p>New <code><a href="../reference/sql_expr.html">sql_call2()</a></code> which is to <code><a href="https://rlang.r-lib.org/reference/call2.html" class="external-link">rlang::call2()</a></code> as <code><a href="../reference/sql_expr.html">sql_expr()</a></code> is to <code><a href="https://rlang.r-lib.org/reference/expr.html" class="external-link">rlang::expr()</a></code>.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/explain.html" class="external-link">show_query()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/explain.html" class="external-link">explain()</a></code> use <code><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat()</a></code> rather than message.</p></li>
<li><p><code><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">union()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/setops.html" class="external-link">union_all()</a></code>, <code><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">setdiff()</a></code> and <code><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">intersect()</a></code> do a better job of matching columns across backends (<a href="https://github.com/tidyverse/dbplyr/issues/183" class="external-link">#183</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.3.0" id="dbplyr-130">dbplyr 1.3.0<a class="anchor" aria-label="anchor" href="#dbplyr-130"></a></h2><p class="text-muted">CRAN release: 2019-01-09</p>
<ul><li>Now supports for dplyr 0.8.0 (<a href="https://github.com/tidyverse/dbplyr/issues/190" class="external-link">#190</a>) and R 3.1.0</li>
</ul><div class="section level3">
<h3 id="api-changes-1-3-0">API changes<a class="anchor" aria-label="anchor" href="#api-changes-1-3-0"></a></h3>
<ul><li><p>Calls of the form <code>dplyr::foo()</code> are now evaluated in the database, rather than locally (<a href="https://github.com/tidyverse/dbplyr/issues/197" class="external-link">#197</a>).</p></li>
<li><p><code>vars</code> argument to <code><a href="../reference/tbl_sql.html">tbl_sql()</a></code> has been formally deprecated; it hasn’t actually done anything for a while (<a href="https://github.com/tidyverse/dbplyr/issues/3254" class="external-link">#3254</a>).</p></li>
<li><p><code>src</code> and <code>tbl</code> objects now include a class generated from the class of the underlying connection object. This makes it possible for dplyr backends to implement different behaviour at the dplyr level, when needed. (<a href="https://github.com/tidyverse/dbplyr/issues/2293" class="external-link">#2293</a>)</p></li>
</ul></div>
<div class="section level3">
<h3 id="sql-translation-1-3-0">SQL translation<a class="anchor" aria-label="anchor" href="#sql-translation-1-3-0"></a></h3>
<ul><li><p><code>x %in% y</code> is now translated to <code>FALSE</code> if <code>y</code> is empty (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/dbplyr/issues/160" class="external-link">#160</a>).</p></li>
<li><p>New <code>as.integer64(x)</code> translation to <code>CAST(x AS BIGINT)</code> (<a href="https://github.com/tidyverse/dbplyr/issues/3305" class="external-link">#3305</a>)</p></li>
<li><p><code>case_when</code> now translates with a ELSE clause if a formula of the form <code>TRUE~&lt;RHS&gt;</code> is provided . (<a href="https://github.com/cderv" class="external-link">@cderv</a>, <a href="https://github.com/tidyverse/dbplyr/issues/112" class="external-link">#112</a>)</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/cumall.html" class="external-link">cummean()</a></code> now generates <code>AVG()</code> not <code>MEAN()</code> (<a href="https://github.com/tidyverse/dbplyr/issues/157" class="external-link">#157</a>)</p></li>
<li><p><code>str_detect()</code> now uses correct parameter order (<a href="https://github.com/tidyverse/dbplyr/issues/3397" class="external-link">#3397</a>)</p></li>
<li>
<p>MS SQL</p>
<ul><li>Cumulative summary functions now work (<a href="https://github.com/tidyverse/dbplyr/issues/157" class="external-link">#157</a>)</li>
<li>
<code><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse()</a></code> uses <code>CASE WHEN</code> instead of <code>IIF</code>; this allows more complex operations, such as <code>%in%</code>, to work properly (<a href="https://github.com/tidyverse/dbplyr/issues/93" class="external-link">#93</a>)</li>
</ul></li>
<li>
<p>Oracle</p>
<ul><li>Custom <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_drop_table()</a></code> now only drops tables if they exist (<a href="https://github.com/tidyverse/dbplyr/issues/3306" class="external-link">#3306</a>)</li>
<li>Custom <code><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">setdiff()</a></code> translation (<a href="https://github.com/tidyverse/dbplyr/issues/3493" class="external-link">#3493</a>)</li>
<li>Custom <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_explain()</a></code> translation (<a href="https://github.com/tidyverse/dbplyr/issues/3471" class="external-link">#3471</a>)</li>
</ul></li>
<li>
<p>SQLite</p>
<ul><li>Correct translation for <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric()</a></code>/<code><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double()</a></code> (<a href="https://github.com/chris-park" class="external-link">@chris-park</a>, <a href="https://github.com/tidyverse/dbplyr/issues/171" class="external-link">#171</a>).</li>
</ul></li>
<li>
<p>Redshift</p>
<ul><li>
<code><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr()</a></code> translation improved (<a href="https://github.com/tidyverse/dbplyr/issues/3339" class="external-link">#3339</a>)</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-1-3-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-1-3-0"></a></h3>
<ul><li><p><code><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to()</a></code> will only remove existing table when <code>overwrite = TRUE</code> and the table already exists, eliminating a confusing “NOTICE” from PostgreSQL (<a href="https://github.com/tidyverse/dbplyr/issues/3197" class="external-link">#3197</a>).</p></li>
<li><p><code><a href="../reference/partial_eval.html">partial_eval()</a></code> handles unevaluated formulas (<a href="https://github.com/tidyverse/dbplyr/issues/184" class="external-link">#184</a>).</p></li>
<li><p><code><a href="../reference/pull.tbl_sql.html">pull.tbl_sql()</a></code> now extracts correctly from grouped tables (<a href="https://github.com/tidyverse/dbplyr/issues/3562" class="external-link">#3562</a>).</p></li>
<li><p><code>sql_render.op()</code> now correctly forwards the <code>con</code> argument (<a href="https://github.com/kevinykuo" class="external-link">@kevinykuo</a>, <a href="https://github.com/tidyverse/dbplyr/issues/73" class="external-link">#73</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.2.2" id="dbplyr-122">dbplyr 1.2.2<a class="anchor" aria-label="anchor" href="#dbplyr-122"></a></h2><p class="text-muted">CRAN release: 2018-07-25</p>
<ul><li>R CMD check fixes</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.2.1" id="dbplyr-121">dbplyr 1.2.1<a class="anchor" aria-label="anchor" href="#dbplyr-121"></a></h2><p class="text-muted">CRAN release: 2018-02-19</p>
<ul><li>Forward compatibility fixes for rlang 0.2.0</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.2.0" id="dbplyr-120">dbplyr 1.2.0<a class="anchor" aria-label="anchor" href="#dbplyr-120"></a></h2><p class="text-muted">CRAN release: 2018-01-03</p>
<div class="section level3">
<h3 id="new-top-level-translations-1-2-0">New top-level translations<a class="anchor" aria-label="anchor" href="#new-top-level-translations-1-2-0"></a></h3>
<ul><li>
<p>New translations for</p>
<ul><li>MS Access (<a href="https://github.com/tidyverse/dbplyr/issues/2946" class="external-link">#2946</a>) (<a href="https://github.com/DavisVaughan" class="external-link">@DavisVaughan</a>)</li>
<li>Oracle, via odbc or ROracle (<a href="https://github.com/tidyverse/dbplyr/issues/2928" class="external-link">#2928</a>, <a href="https://github.com/tidyverse/dbplyr/issues/2732" class="external-link">#2732</a>, <a href="https://github.com/edgararuiz" class="external-link">@edgararuiz</a>)</li>
<li>Teradata.</li>
<li>Redshift.</li>
</ul></li>
<li><p>dbplyr now supplies appropriate translations for the RMariaDB and RPostgres packages (<a href="https://github.com/tidyverse/dbplyr/issues/3154" class="external-link">#3154</a>). We generally recommend using these packages in favour of the older RMySQL and RPostgreSQL packages as they are fully DBI compliant and tested with DBItest.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-2-0">New features<a class="anchor" aria-label="anchor" href="#new-features-1-2-0"></a></h3>
<ul><li><p><code><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to()</a></code> can now “copy” tbl_sql in the same src, providing another way to cache a query into a temporary table (<a href="https://github.com/tidyverse/dbplyr/issues/3064" class="external-link">#3064</a>). You can also <code>copy_to</code> tbl_sqls from another source, and <code><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to()</a></code> will automatically collect then copy.</p></li>
<li><p>Initial support for stringr functions: <code>str_length()</code>, <code>str_to_upper()</code>, <code>str_to_lower()</code>, <code>str_replace_all()</code>, <code>str_detect()</code>, <code>str_trim()</code>. Regular expression support varies from database to database, but most simple regular expressions should be ok.</p></li>
</ul></div>
<div class="section level3">
<h3 id="tools-for-developers-1-2-0">Tools for developers<a class="anchor" aria-label="anchor" href="#tools-for-developers-1-2-0"></a></h3>
<ul><li><p><code><a href="../reference/db-io.html">db_compute()</a></code> gains an <code>analyze</code> argument to match <code><a href="../reference/db-io.html">db_copy_to()</a></code>.</p></li>
<li><p>New <code><a href="../reference/remote_name.html">remote_name()</a></code>, <code><a href="../reference/remote_name.html">remote_con()</a></code>, <code><a href="../reference/remote_name.html">remote_src()</a></code>, <code><a href="../reference/remote_name.html">remote_query()</a></code> and <code><a href="../reference/remote_name.html">remote_query_plan()</a></code> provide a standard API for get metadata about a remote tbl (<a href="https://github.com/tidyverse/dbplyr/issues/3130" class="external-link">#3130</a>, <a href="https://github.com/tidyverse/dbplyr/issues/2923" class="external-link">#2923</a>, <a href="https://github.com/tidyverse/dbplyr/issues/2824" class="external-link">#2824</a>).</p></li>
<li><p>New <code><a href="../reference/sql_expr.html">sql_expr()</a></code> is a more convenient building block for low-level SQL translation (<a href="https://github.com/tidyverse/dbplyr/issues/3169" class="external-link">#3169</a>).</p></li>
<li><p>New <code><a href="../reference/sql_variant.html">sql_aggregate()</a></code> and <code><a href="../reference/win_over.html">win_aggregate()</a></code> for generating SQL and windowed SQL functions for aggregates. These take one argument, <code>x</code>, and warn if <code>na.rm</code> is not <code>TRUE</code> (<a href="https://github.com/tidyverse/dbplyr/issues/3155" class="external-link">#3155</a>). <code><a href="../reference/win_over.html">win_recycled()</a></code> is equivalent to <code><a href="../reference/win_over.html">win_aggregate()</a></code> and has been soft-deprecated.</p></li>
<li><p><code>db_write_table</code> now needs to return the table name</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-1-2-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-1-2-0"></a></h3>
<ul><li><p>Multiple <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code> calls in a row now collapse to a single call. This avoids a printing problem with MS SQL (<a href="https://github.com/tidyverse/dbplyr/issues/3084" class="external-link">#3084</a>).</p></li>
<li><p><code><a href="../reference/escape.html">escape()</a></code> now works with integer64 values from the bit64 package (<a href="https://github.com/tidyverse/dbplyr/issues/3230" class="external-link">#3230</a>)</p></li>
<li><p><code>if</code>, <code><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse()</a></code>, and <code><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else()</a></code> now correctly scope the false condition so that it only applies to non-NULL conditions (<a href="https://github.com/tidyverse/dbplyr/issues/3157" class="external-link">#3157</a>)</p></li>
<li><p><code><a href="../reference/ident.html">ident()</a></code> and <code><a href="../reference/ident_q.html">ident_q()</a></code> handle 0-length inputs better, and should be easier to use with S3 (<a href="https://github.com/tidyverse/dbplyr/issues/3212" class="external-link">#3212</a>)</p></li>
<li><p><code><a href="../reference/in_schema.html">in_schema()</a></code> should now work in more places, particularly in <code><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to()</a></code> (<a href="https://github.com/tidyverse/dbplyr/issues/3013" class="external-link">#3013</a>, <a href="https://github.com/baileych" class="external-link">@baileych</a>)</p></li>
<li><p>SQL generation for joins no longer gets stuck in a endless loop if you request an empty suffix (<a href="https://github.com/tidyverse/dbplyr/issues/3220" class="external-link">#3220</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> has better logic for splitting a single mutate into multiple subqueries (<a href="https://github.com/tidyverse/dbplyr/issues/3095" class="external-link">#3095</a>).</p></li>
<li><p>Improved <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste()</a></code> and <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0()</a></code> support in MySQL, PostgreSQL (<a href="https://github.com/tidyverse/dbplyr/issues/3168" class="external-link">#3168</a>), and RSQLite (<a href="https://github.com/tidyverse/dbplyr/issues/3176" class="external-link">#3176</a>). MySQL and PostgreSQL gain support for <code>str_flatten()</code> which behaves like <code>paste(x, collapse = "-")</code> (but for technical reasons can’t be implemented as a straightforward translation of <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste()</a></code>).</p></li>
<li><p><code>same_src.tbl_sql()</code> now performs correct comparison instead of always returning <code>TRUE</code>. This means that <code>copy = TRUE</code> once again allows you to perform cross-database joins (<a href="https://github.com/tidyverse/dbplyr/issues/3002" class="external-link">#3002</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> queries no longer alias column names unnecessarily (<a href="https://github.com/tidyverse/dbplyr/issues/2968" class="external-link">#2968</a>, <a href="https://github.com/DavisVaughan" class="external-link">@DavisVaughan</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename()</a></code> are now powered by tidyselect, fixing a few renaming bugs (<a href="https://github.com/tidyverse/dbplyr/issues/3132" class="external-link">#3132</a>, <a href="https://github.com/tidyverse/dbplyr/issues/2943" class="external-link">#2943</a>, <a href="https://github.com/tidyverse/dbplyr/issues/2860" class="external-link">#2860</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise()</a></code> once again performs partial evaluation before database submission (<a href="https://github.com/tidyverse/dbplyr/issues/3148" class="external-link">#3148</a>).</p></li>
<li><p><code>test_src()</code> makes it easier to access a single test source.</p></li>
</ul></div>
<div class="section level3">
<h3 id="database-specific-improvements-1-2-0">Database specific improvements<a class="anchor" aria-label="anchor" href="#database-specific-improvements-1-2-0"></a></h3>
<ul><li>
<p>MS SQL</p>
<ul><li><p>Better support for temporary tables (<a href="https://github.com/Hong-Revo" class="external-link">@Hong-Revo</a>)</p></li>
<li><p>Different translations for filter/mutate contexts for: <code>NULL</code> evaluation (<code><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na()</a></code>, <code><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null()</a></code>), logical operators (<code>!</code>, <code>&amp;</code>, <code>&amp;&amp;</code>, <code>|</code>, <code>||</code>), and comparison operators (<code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;=</code>)</p></li>
</ul></li>
<li><p>MySQL: <code><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to()</a></code> (via <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_write_table()</a></code>) correctly translates logical variables to integers (<a href="https://github.com/tidyverse/dbplyr/issues/3151" class="external-link">#3151</a>).</p></li>
<li><p>odbc: improved <code><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n()</a></code> translation in windowed context.</p></li>
<li><p>SQLite: improved <code>na_if</code> translation (<a href="https://github.com/cwarden" class="external-link">@cwarden</a>)</p></li>
<li><p>PostgreSQL: translation for <code><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl()</a></code> added (<a href="https://github.com/zozlak" class="external-link">@zozlak</a>)</p></li>
<li><p>Oracle: changed VARVHAR to VARCHAR2 datatype (<a href="https://github.com/washcycle" class="external-link">@washcycle</a>, <a href="https://github.com/tidyverse/dbplyr/issues/66" class="external-link">#66</a>)</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.0" id="dbplyr-110">dbplyr 1.1.0<a class="anchor" aria-label="anchor" href="#dbplyr-110"></a></h2><p class="text-muted">CRAN release: 2017-06-27</p>
<div class="section level3">
<h3 id="new-features-1-1-0">New features<a class="anchor" aria-label="anchor" href="#new-features-1-1-0"></a></h3>
<ul><li><p><code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join()</a></code> over non-overlapping columns <code>by = character()</code> translated to <code>CROSS JOIN</code> (<a href="https://github.com/tidyverse/dbplyr/issues/2924" class="external-link">#2924</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when()</a></code> now translates to SQL “CASE WHEN” (<a href="https://github.com/tidyverse/dbplyr/issues/2894" class="external-link">#2894</a>)</p></li>
<li><p><code>x %in% c(1)</code> now generates the same SQL as <code>x %in% 1</code> (<a href="https://github.com/tidyverse/dbplyr/issues/2898" class="external-link">#2898</a>).</p></li>
<li><p>New <code><a href="../reference/window_order.html">window_order()</a></code> and <code><a href="../reference/window_order.html">window_frame()</a></code> give you finer control over the window functions that dplyr creates (<a href="https://github.com/tidyverse/dbplyr/issues/2874" class="external-link">#2874</a>, <a href="https://github.com/tidyverse/dbplyr/issues/2593" class="external-link">#2593</a>).</p></li>
<li><p>Added SQL translations for Oracle (<a href="https://github.com/edgararuiz" class="external-link">@edgararuiz</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-1-1-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-1-1-0"></a></h3>
<ul><li><p><code>x %in% c(1)</code> now generates the same SQL as <code>x %in% 1</code> (<a href="https://github.com/tidyverse/dbplyr/issues/2898" class="external-link">#2898</a>).</p></li>
<li><p><code>head(tbl, 0)</code> is now supported (<a href="https://github.com/tidyverse/dbplyr/issues/2863" class="external-link">#2863</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code>ing zero columns gives a more information error message (<a href="https://github.com/tidyverse/dbplyr/issues/2863" class="external-link">#2863</a>).</p></li>
<li><p>Variables created in a join are now disambiguated against other variables in the same table, not just variables in the other table (<a href="https://github.com/tidyverse/dbplyr/issues/2823" class="external-link">#2823</a>).</p></li>
<li><p>PostgreSQL gains a better translation for <code><a href="https://rdrr.io/r/base/Round.html" class="external-link">round()</a></code> (<a href="https://github.com/tidyverse/dbplyr/issues/60" class="external-link">#60</a>).</p></li>
<li><p>Added custom <code>db_analyze_table()</code> for MS SQL, Oracle, Hive and Impala (<a href="https://github.com/edgararuiz" class="external-link">@edgararuiz</a>)</p></li>
<li><p>Added support for <code><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd()</a></code> for aggregate and window functions (<a href="https://github.com/tidyverse/dbplyr/issues/2887" class="external-link">#2887</a>) (<a href="https://github.com/edgararuiz" class="external-link">@edgararuiz</a>)</p></li>
<li><p>You can now use the magrittr pipe within expressions, e.g. <code>mutate(mtcars, cyl %&gt;% as.character())</code>.</p></li>
<li><p>If a translation was supplied for a summarise function, but not for the equivalent windowed variant, the expression would be translated to <code>NULL</code> with a warning. Now <code><a href="../reference/sql_variant.html">sql_variant()</a></code> checks that all aggregate functions have matching window functions so that correct translations or clean errors will be generated (<a href="https://github.com/tidyverse/dbplyr/issues/2887" class="external-link">#2887</a>)</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.0" id="dbplyr-100">dbplyr 1.0.0<a class="anchor" aria-label="anchor" href="#dbplyr-100"></a></h2><p class="text-muted">CRAN release: 2017-06-09</p>
<div class="section level3">
<h3 id="new-features-1-0-0">New features<a class="anchor" aria-label="anchor" href="#new-features-1-0-0"></a></h3>
<ul><li>
<p><code><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to()</a></code> now work directly with DBI connections (<a href="https://github.com/tidyverse/dbplyr/issues/2423" class="external-link">#2423</a>, <a href="https://github.com/tidyverse/dbplyr/issues/2576" class="external-link">#2576</a>), so there is no longer a need to generate a dplyr src.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">":memory:"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to</a></span><span class="op">(</span><span class="va">con</span>, <span class="va">mtcars</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mtcars2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"mtcars"</span><span class="op">)</span></span>
<span><span class="va">mtcars2</span></span></code></pre></div>
</li>
<li><p><code><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse()</a></code> now works with remote tables (<a href="https://github.com/tidyverse/dbplyr/issues/2665" class="external-link">#2665</a>)</p></li>
<li><p>dplyr has gained a basic SQL optimiser, which collapses certain nested SELECT queries into a single query (<a href="https://github.com/tidyverse/dbplyr/issues/1979" class="external-link">#1979</a>). This will improve query execution performance for databases with less sophisticated query optimisers, and fixes certain problems with ordering and limits in subqueries (<a href="https://github.com/tidyverse/dbplyr/issues/1979" class="external-link">#1979</a>). A big thanks goes to <a href="https://github.com/hhoeflin" class="external-link">@hhoeflin</a> for figuring out this optimisation.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">compute()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collapse()</a></code> now preserve the “ordering” of rows. This only affects the computation of window functions, as the rest of SQL does not care about row order (<a href="https://github.com/tidyverse/dbplyr/issues/2281" class="external-link">#2281</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to()</a></code> gains an <code>overwrite</code> argument which allows you to overwrite an existing table. Use with care! (<a href="https://github.com/tidyverse/dbplyr/issues/2296" class="external-link">#2296</a>)</p></li>
<li><p>New <code><a href="../reference/in_schema.html">in_schema()</a></code> function makes it easy to refer to tables in schema: <code>in_schema("my_schema_name", "my_table_name")</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-0-0">Deprecated and defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-0-0"></a></h3>
<ul><li>
<code>query()</code> is no longer exported. It hasn’t been useful for a while so this shouldn’t break any code.</li>
</ul></div>
<div class="section level3">
<h3 id="verb-level-sql-generation-1-0-0">Verb-level SQL generation<a class="anchor" aria-label="anchor" href="#verb-level-sql-generation-1-0-0"></a></h3>
<ul><li><p>Partial evaluation occurs immediately when you execute a verb (like <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> or <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code>) rather than happening when the query is executed (<a href="https://github.com/tidyverse/dbplyr/issues/2370" class="external-link">#2370</a>).</p></li>
<li><p><code>mutate.tbl_sql()</code> will now generate as many subqueries as necessary so that you can refer to variables that you just created (like in mutate with regular dataframes) (<a href="https://github.com/tidyverse/dbplyr/issues/2481" class="external-link">#2481</a>, <a href="https://github.com/tidyverse/dbplyr/issues/2483" class="external-link">#2483</a>).</p></li>
<li>
<p>SQL joins have been improved:</p>
<ul><li><p>SQL joins always use the <code>ON ...</code> syntax, avoiding <code>USING ...</code> even for natural joins. Improved handling of tables with columns of the same name (<a href="https://github.com/tidyverse/dbplyr/issues/1997" class="external-link">#1997</a>, <a href="https://github.com/javierluraschi" class="external-link">@javierluraschi</a>). They now generate SQL more similar to what you’d write by hand, eliminating a layer or two of subqueries (<a href="https://github.com/tidyverse/dbplyr/issues/2333" class="external-link">#2333</a>)</p></li>
<li><p>[API] They now follow the same rules for including duplicated key variables that the data frame methods do, namely that key variables are only kept from <code>x</code>, and never from <code>y</code> (<a href="https://github.com/tidyverse/dbplyr/issues/2410" class="external-link">#2410</a>)</p></li>
<li><p>[API] The <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">sql_join()</a></code> generic now gains a <code>vars</code> argument which lists the variables taken from the left and right sides of the join. If you have a custom <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">sql_join()</a></code> method, you’ll need to update how your code generates joins, following the template in <code>sql_join.generic()</code>.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join()</a></code> throws a clear error when you attempt to use it with a MySQL backend (<a href="https://github.com/tidyverse/dbplyr/issues/2045" class="external-link">#2045</a>)</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">right_join()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join()</a></code> now return results consistent with local data frame sources when there are records in the right table with no match in the left table. <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">right_join()</a></code> returns values of <code>by</code> columns from the right table. <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join()</a></code> returns coalesced values of <code>by</code> columns from the left and right tables (<a href="https://github.com/tidyverse/dbplyr/issues/2578" class="external-link">#2578</a>, <a href="https://github.com/ianmcook" class="external-link">@ianmcook</a>)</p></li>
</ul></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by()</a></code> can now perform an inline mutate for database backends (<a href="https://github.com/tidyverse/dbplyr/issues/2422" class="external-link">#2422</a>).</p></li>
<li>
<p>The SQL generation set operations (<code><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">intersect()</a></code>, <code><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">setdiff()</a></code>, <code><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">union()</a></code>, and <code><a href="https://dplyr.tidyverse.org/reference/setops.html" class="external-link">union_all()</a></code>) have been considerably improved.</p>
<p>By default, the component SELECT are surrounded with parentheses, except on SQLite. The SQLite backend will now throw an error if you attempt a set operation on a query that contains a LIMIT, as that is not supported in SQLite (<a href="https://github.com/tidyverse/dbplyr/issues/2270" class="external-link">#2270</a>).</p>
<p>All set operations match column names across inputs, filling in non-matching variables with NULL (<a href="https://github.com/tidyverse/dbplyr/issues/2556" class="external-link">#2556</a>).</p>
</li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by()</a></code> now combine correctly (<a href="https://github.com/tidyverse/dbplyr/issues/1962" class="external-link">#1962</a>)</p></li>
<li><p><code><a href="../reference/tbl_lazy.html">tbl_lazy()</a></code> and <code>lazy_tbl()</code> have been exported. These help you test generated SQL with out an active database connection.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup()</a></code> correctly resets grouping variables (<a href="https://github.com/tidyverse/dbplyr/issues/2704" class="external-link">#2704</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="vector-level-sql-generation-1-0-0">Vector-level SQL generation<a class="anchor" aria-label="anchor" href="#vector-level-sql-generation-1-0-0"></a></h3>
<ul><li><p>New <code><a href="../reference/sql.html">as.sql()</a></code> safely coerces an input to SQL.</p></li>
<li><p>More translators for <code><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character()</a></code>, <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer()</a></code> and <code><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double()</a></code> (<a href="https://github.com/tidyverse/dbplyr/issues/2775" class="external-link">#2775</a>).</p></li>
<li><p>New <code><a href="../reference/ident_q.html">ident_q()</a></code> makes it possible to specifier identifiers that do not need to be quoted.</p></li>
<li>
<p>Translation of inline scalars:</p>
<ul><li><p>Logical values are now translated differently depending on the backend. The default is to use “true” and “false” which is the SQL-99 standard, but not widely support. SQLite translates to “0” and “1” (<a href="https://github.com/tidyverse/dbplyr/issues/2052" class="external-link">#2052</a>).</p></li>
<li><p><code>Inf</code> and <code>-Inf</code> are correctly escaped</p></li>
<li><p>Better test for whether or not a double is similar to an integer and hence needs a trailing 0.0 added (<a href="https://github.com/tidyverse/dbplyr/issues/2004" class="external-link">#2004</a>).</p></li>
<li><p>Quoting defaults to <code>DBI::dbEscapeString()</code> and <code><a href="https://dbi.r-dbi.org/reference/dbQuoteIdentifier.html" class="external-link">DBI::dbQuoteIdentifier()</a></code> respectively.</p></li>
</ul></li>
<li><p><code>::</code> and <code>:::</code> are handled correctly (<a href="https://github.com/tidyverse/dbplyr/issues/2321" class="external-link">#2321</a>)</p></li>
<li><p><code>x %in% 1</code> is now correctly translated to <code>x IN (1)</code> (<a href="https://github.com/tidyverse/dbplyr/issues/511" class="external-link">#511</a>).</p></li>
<li><p><code><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else()</a></code> use correct argument names in SQL translation (<a href="https://github.com/tidyverse/dbplyr/issues/2225" class="external-link">#2225</a>).</p></li>
<li><p><code><a href="../reference/ident.html">ident()</a></code> now returns an object with class <code>c("ident", "character")</code>. It no longer contains “sql” to indicate that this is not already escaped.</p></li>
<li><p><code><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na()</a></code> and <code><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null()</a></code> gain extra parens in SQL translation to preserve correct precedence (<a href="https://github.com/tidyverse/dbplyr/issues/2302" class="external-link">#2302</a>).</p></li>
<li><p>[API] <code>log(x, b)</code> is now correctly translated to the SQL <code>log(b, x)</code> (<a href="https://github.com/tidyverse/dbplyr/issues/2288" class="external-link">#2288</a>). SQLite does not support the 2-argument log function so it is translated to <code>log(x) / log(b)</code>.</p></li>
<li><p><code>nth(x, i)</code> is now correctly translated to <code>nth_value(x, i)</code>.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/n_distinct.html" class="external-link">n_distinct()</a></code> now accepts multiple variables (<a href="https://github.com/tidyverse/dbplyr/issues/2148" class="external-link">#2148</a>).</p></li>
<li><p>[API] <code><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr()</a></code> is now translated to SQL, correcting for the difference in the third argument. In R, it’s the position of the last character, in SQL it’s the length of the string (<a href="https://github.com/tidyverse/dbplyr/issues/2536" class="external-link">#2536</a>).</p></li>
<li><p><code><a href="../reference/win_over.html">win_over()</a></code> escapes expression using current database rules.</p></li>
</ul></div>
<div class="section level3">
<h3 id="backends-1-0-0">Backends<a class="anchor" aria-label="anchor" href="#backends-1-0-0"></a></h3>
<ul><li><p><code><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to()</a></code> now uses <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_write_table()</a></code> instead of <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_create_table()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_insert_into()</a></code>. <code>db_write_table.DBIConnection()</code> uses <code><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable()</a></code>.</p></li>
<li><p>New <code><a href="../reference/db-io.html">db_copy_to()</a></code>, <code><a href="../reference/db-io.html">db_compute()</a></code> and <code><a href="../reference/db-io.html">db_collect()</a></code> allow backends to override the entire database process behind <code><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">compute()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect()</a></code>. <code><a href="../reference/db-misc.html">db_sql_render()</a></code> allow additional control over the SQL rendering process.</p></li>
<li><p>All generics whose behaviour can vary from database to database now provide a DBIConnection method. That means that you can easily scan the NAMESPACE to see the extension points.</p></li>
<li><p><code><a href="../reference/db-quote.html">sql_escape_logical()</a></code> allows you to control the translation of literal logicals (<a href="https://github.com/tidyverse/dbplyr/issues/2614" class="external-link">#2614</a>).</p></li>
<li><p><code>src_desc()</code> has been replaced by <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_desc()</a></code> and now dispatches on the connection, eliminating the last method that required dispatch on the class of the src.</p></li>
<li><p><code><a href="../reference/win_over.html">win_over()</a></code>, <code><a href="../reference/win_over.html">win_rank()</a></code>, <code><a href="../reference/win_over.html">win_recycled()</a></code>, <code><a href="../reference/win_over.html">win_cumulative()</a></code>, <code><a href="../reference/win_over.html">win_current_group()</a></code> and <code><a href="../reference/win_over.html">win_current_order()</a></code> are now exported. This should make it easier to provide customised SQL for window functions (<a href="https://github.com/tidyverse/dbplyr/issues/2051" class="external-link">#2051</a>, <a href="https://github.com/tidyverse/dbplyr/issues/2126" class="external-link">#2126</a>).</p></li>
<li><p>SQL translation for Microsoft SQL Server (<a href="https://github.com/edgararuiz" class="external-link">@edgararuiz</a>)</p></li>
<li><p>SQL translation for Apache Hive (<a href="https://github.com/edgararuiz" class="external-link">@edgararuiz</a>)</p></li>
<li><p>SQL translation for Apache Impala (<a href="https://github.com/edgararuiz" class="external-link">@edgararuiz</a>)</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-bug-fixes-and-improvements-1-0-0">Minor bug fixes and improvements<a class="anchor" aria-label="anchor" href="#minor-bug-fixes-and-improvements-1-0-0"></a></h3>
<ul><li><p><code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect()</a></code> once again defaults to return all rows in the data (<a href="https://github.com/tidyverse/dbplyr/issues/1968" class="external-link">#1968</a>). This makes it behave the same as <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code> and <code><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble()</a></code>.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect()</a></code> only regroups by variables present in the data (<a href="https://github.com/tidyverse/dbplyr/issues/2156" class="external-link">#2156</a>)</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect()</a></code> will automatically LIMIT the result to the <code>n</code>, the number of rows requested. This will provide the query planner with more information that it may be able to use to improve execution time (<a href="https://github.com/tidyverse/dbplyr/issues/2083" class="external-link">#2083</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/common_by.html" class="external-link">common_by()</a></code> gets a better error message for unexpected inputs (<a href="https://github.com/tidyverse/dbplyr/issues/2091" class="external-link">#2091</a>)</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to()</a></code> no longer checks that the table doesn’t exist before creation, instead preferring to fall back on the database for error messages. This should reduce both false positives and false negative (<a href="https://github.com/tidyverse/dbplyr/issues/1470" class="external-link">#1470</a>)</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to()</a></code> now succeeds for MySQL if a character column contains <code>NA</code> (<a href="https://github.com/tidyverse/dbplyr/issues/1975" class="external-link">#1975</a>, <a href="https://github.com/tidyverse/dbplyr/issues/2256" class="external-link">#2256</a>, <a href="https://github.com/tidyverse/dbplyr/issues/2263" class="external-link">#2263</a>, <a href="https://github.com/tidyverse/dbplyr/issues/2381" class="external-link">#2381</a>, <a href="https://github.com/demorenoc" class="external-link">@demorenoc</a>, <a href="https://github.com/eduardgrebe" class="external-link">@eduardgrebe</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to()</a></code> now returns its output invisibly (since you’re often just calling for the side-effect).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct()</a></code> reports improved variable information for SQL backends. This means that it is more likely to work in the middle of a pipeline (<a href="https://github.com/tidyverse/dbplyr/issues/2359" class="external-link">#2359</a>).</p></li>
<li><p>Ungrouped <code><a href="https://dplyr.tidyverse.org/reference/do.html" class="external-link">do()</a></code> on database backends now collects all data locally first (<a href="https://github.com/tidyverse/dbplyr/issues/2392" class="external-link">#2392</a>).</p></li>
<li><p>Call <code><a href="https://dbi.r-dbi.org/reference/dbFetch.html" class="external-link">dbFetch()</a></code> instead of the deprecated <code><a href="https://dbi.r-dbi.org/reference/dbFetch.html" class="external-link">fetch()</a></code> (<a href="https://github.com/tidyverse/dbplyr/issues/2134" class="external-link">#2134</a>). Use <code><a href="https://dbi.r-dbi.org/reference/dbExecute.html" class="external-link">DBI::dbExecute()</a></code> for non-query SQL commands (<a href="https://github.com/tidyverse/dbplyr/issues/1912" class="external-link">#1912</a>)</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/explain.html" class="external-link">explain()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/explain.html" class="external-link">show_query()</a></code> now invisibly return the first argument, making them easier to use inside a pipeline.</p></li>
<li><p><code>print.tbl_sql()</code> displays ordering (<a href="https://github.com/tidyverse/dbplyr/issues/2287" class="external-link">#2287</a>) and prints table name, if known.</p></li>
<li><p><code>print(df, n = Inf)</code> and <code>head(df, n = Inf)</code> now work with remote tables (<a href="https://github.com/tidyverse/dbplyr/issues/2580" class="external-link">#2580</a>).</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">db_desc()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/backend_dbplyr.html" class="external-link">sql_translate_env()</a></code> get defaults for DBIConnection.</p></li>
<li><p>Formatting now works by overriding the <code>tbl_sum()</code> generic instead of <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>. This means that the output is more consistent with tibble, and that <code><a href="https://rdrr.io/r/base/format.html" class="external-link">format()</a></code> is now supported also for SQL sources (tidyverse/dbplyr#14).</p></li>
</ul></div>
<div class="section level3">
<h3 id="lazy-ops-1-0-0">Lazy ops<a class="anchor" aria-label="anchor" href="#lazy-ops-1-0-0"></a></h3>
<ul><li><p>[API] The signature of <code>op_base</code> has changed to <code>op_base(x, vars, class)</code></p></li>
<li>
<p>[API] <code><a href="../reference/translate_sql.html">translate_sql()</a></code> and <code><a href="../reference/partial_eval.html">partial_eval()</a></code> have been refined:</p>
<ul><li><p><code><a href="../reference/translate_sql.html">translate_sql()</a></code> no longer takes a vars argument; instead call <code><a href="../reference/partial_eval.html">partial_eval()</a></code> yourself.</p></li>
<li><p>Because it no longer needs the environment <code>translate_sql()_</code> now works with a list of dots, rather than a <code>lazy_dots</code>.</p></li>
<li><p><code><a href="../reference/partial_eval.html">partial_eval()</a></code> now takes a character vector of variable names rather than a tbl.</p></li>
<li><p>This leads to a simplification of the <code>op</code> data structure: dots is now a list of expressions rather than a <code>lazy_dots</code>.</p></li>
</ul></li>
<li><p>[API] <code><a href="../reference/lazy_ops.html">op_vars()</a></code> now returns a list of quoted expressions. This enables escaping to happen at the correct time (i.e. when the connection is known).</p></li>
</ul></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, Maximilian Girlich, Edgar Ruiz, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer></body></html>

