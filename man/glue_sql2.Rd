% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/build-sql.R
\name{glue_sql2}
\alias{glue_sql2}
\title{Build SQL strings with glue syntax}
\usage{
glue_sql2(
  .con,
  ...,
  .sep = "",
  .envir = parent.frame(),
  .open = "{",
  .close = "}",
  .na = DBI::SQL("NULL"),
  .null = "",
  .comment = "#",
  .literal = FALSE,
  .trim = TRUE
)
}
\arguments{
\item{.con}{A database connection.}

\item{...}{SQL fragments to interpolate. These are evaluated in \code{.envir} and
then combined according to their type markers.}

\item{.sep}{Separator to use between elements of \code{...}.}

\item{.envir}{Environment to evaluate \code{...} in.}

\item{.open, .close}{Opening and closing delimiters for interpolation.}

\item{.na, .null}{Values to use for \code{NA}/\code{NULL} values.}

\item{.comment}{Comment character to use.}

\item{.literal}{Whether to treat strings literally.}

\item{.trim}{Whether to trim whitespace.}
}
\value{
An SQL string.
}
\description{
\code{glue_sql2()} is a SQL string builder that uses \code{\link[glue:glue]{glue::glue()}} syntax with
special type markers for safe SQL generation. It replaces the deprecated
\code{\link[=build_sql]{build_sql()}} function with a more explicit and type-safe approach.

Within the glue template, use type markers to specify how values should be
escaped and formatted:
\itemize{
\item \code{.sql} - An existing SQL string.
\item \code{.tbl} - A table identifier (e.g., \code{DBI::Id()}, string, or \code{in_schema()}).
\item \code{.from} - A subquery or table identifier.
\item \code{.name} - A name for an index or subquery (string or \code{ident()}).
\item \code{.col} - A column name or multiple columns (use \code{*} suffix for multiple).
\item \code{.kw} - An SQL keyword that will be syntax-highlighted.
\item \code{.val} - Any value to be escaped (vectors, dates, SQL, etc.).
}

The \code{*} suffix after \code{.col} or \code{.val} collapses the vector into a
comma-separated list.
}
\examples{
con <- simulate_dbi()

tbl <- "my_table"
glue_sql2(con, "SELECT * FROM {.tbl tbl}")

# Values are properly escaped
name <- "Robert'); DROP TABLE students;--"
glue_sql2(con, "INSERT INTO students (name) VALUES ({.val name})")

# Multiple columns with collapse
cols <- c("name", "age", "grade")
glue_sql2(con, "SELECT {.col cols*} FROM students")
}
